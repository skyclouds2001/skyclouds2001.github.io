<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="theme-color" content="#3273dc"><title>标签: Other - skyclouds2001&#039;s Blog</title><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="#3273dc"><meta name="application-name" content="skyclouds2001&#039;s blog"><meta name="msapplication-TileImage" content="https://avatars.githubusercontent.com/u/95597335"><meta name="msapplication-TileColor" content="#3273dc"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="skyclouds2001&#039;s blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><link rel="apple-touch-icon" sizes="460x460" href="https://avatars.githubusercontent.com/u/95597335"><meta name="description" content="The personal blog of skyclouds2001"><meta property="og:type" content="blog"><meta property="og:title" content="skyclouds2001&#039;s blog"><meta property="og:url" content="https://skyclouds2001.github.io/"><meta property="og:site_name" content="skyclouds2001&#039;s blog"><meta property="og:description" content="The personal blog of skyclouds2001"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://avatars.githubusercontent.com/u/95597335"><meta property="article:author" content="skyclouds2001"><meta property="article:tag" content="skyclouds2001 blog"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://avatars.githubusercontent.com/u/95597335"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://skyclouds2001.github.io/"},"headline":"skyclouds2001's blog","image":[],"author":{"@type":"Person","name":"skyclouds2001"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject"}},"description":"The personal blog of skyclouds2001"}</script><link rel="alternate" href="/atom.xml" title="skyclouds2001&#039;s Blog" type="application/atom+xml"><link rel="icon" href="https://avatars.githubusercontent.com/u/95597335"><meta name="referrer" content="no-referrer-when-downgrade"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/5.12.0/css/all.min.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro|Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Microsoft YaHei:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&amp;amp;subset=latin,latin-ext|Inconsolata|Itim|Lobster.css"><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="/js/globalUtils.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><script>var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?98608f7861aa9247199463aaae2cffb9";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();</script><meta name="msvalidate.01" content="F334E8AF334D26B39D41AF73E58A98AC"><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><script src="https://www.googletagmanager.com/gtag/js?id=G-257NZ7S1BB" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'G-257NZ7S1BB');</script><script data-ad-client="ca-pub-6540459960525651" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async></script><link rel="stylesheet" href="/live2d/waifu.css"><script type="text/javascript" async src="/live2d/autoload.js"></script><meta name="generator" content="Hexo 5.4.2"></head><body class="is-3-column has-navbar-fixed-top"><nav class="navbar navbar-main is-fixed-top"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="https://avatars.githubusercontent.com/u/95597335" alt="skyclouds2001&#039;s Blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a><a class="navbar-item" href="/album">Album</a><a class="navbar-item" href="/friend">Friend</a><a class="navbar-item" href="/message">Message</a><a class="navbar-item" href="/self-talking">Self-talking</a><a class="navbar-item" href="/music">Music</a><a class="navbar-item" href="/media">Media</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="GitHub" href="https://github.com/skyclouds2001/skyclouds2001.github.io/"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a><a class="navbar-item" id="night-nav" title="Night Mode" href="javascript:;"><i class="fas fa-moon" id="night-icon"></i></a></div></div></div></nav><script type="text/javascript" src="/js/theme-setting.js"></script><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/tags">标签</a></li><li class="is-active"><a href="#" aria-current="page">Other</a></li></ul></nav></div></div><div class="card widget"><div class="g-ads-x"><div class="card-content"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-6540459960525651" data-ad-slot="3012941103"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></div></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><i class="far fa-calendar-plus"> </i>2023-11-01  <a class="commentCountImg" href="/2023/11/01/Pyodide/#comment-container"><span class="display-none-class">96b71ccc47d34abc856d08daaaf859f2</span><i class="far fa-comment-dots"></i> <span class="commentCount" id="96b71ccc47d34abc856d08daaaf859f2">99+</span>  </a><span class="level-item"><i class="far fa-clock"> </i>5 分钟  <i class="fas fa-pencil-alt"> </i>0.8 k</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/11/01/Pyodide/">Pyodide</a></h1><div class="content"><p>Pyodide 是一个在浏览器环境中运行的 Python 解释器，利用了 CPython 技术和 WebAssembly 技术，从而可以在浏览器中运行 Python 软件包；并且 Pyodide 保证了 Python 与 JavaScript 的兼容，允许 Python 使用浏览器的 API</p>
<h2 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h2><p>使用 CDN 形式向项目中引入 Pyodide 软件包</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">defer</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/pyodide/v0.24.1/full/pyodide.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>然后调用已注入到全局的 <code>loadPyodide()</code> 方法获取到 <code>Pyodide</code> 实例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> pyodide = <span class="keyword">await</span> <span class="title function_">loadPyodide</span>()</span><br></pre></td></tr></table></figure>

<p>调用 <code>Pyodide</code> 实例的 <code>runPython()</code> 方法以执行 Python 代码</p>
<p>该方法传入的字符串，代表需要执行的 Python 代码</p>
<p>该方法的返回值，执行 Python 代码的输出</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pyodide.<span class="title function_">runPython</span>(<span class="string">`print(&#x27;Hello world!&#x27;)`</span>)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>调用 print() 方法的效果相当于调用 console.log() 方法</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pyodide.<span class="title function_">runPython</span>(<span class="string">&#x27;1 + 2&#x27;</span>)</span><br><span class="line">pyodide.<span class="title function_">runPython</span>(<span class="string">&#x27;2 ** 10&#x27;</span>)</span><br><span class="line">pyodide.<span class="title function_">runPython</span>(<span class="string">`</span></span><br><span class="line"><span class="string">import sys</span></span><br><span class="line"><span class="string">sys.version</span></span><br><span class="line"><span class="string">`</span>)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>同样可以在 <code>Pyodide</code> 中使用内置软件包，也可以导入外部软件包</p>
</blockquote>
<p><code>Pyodide</code> 实例的 <code>runPythonAsync()</code> 方法用于异步执行 Python 代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">await</span> pyodide.<span class="title function_">runPythonAsync</span>(<span class="string">&#x27;1 * 1&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="JS-获取-Python-作用域"><a href="#JS-获取-Python-作用域" class="headerlink" title="JS 获取 Python 作用域"></a>JS 获取 Python 作用域</h2><p>Python 全局作用域通过 <code>pyodide.globals</code> 对象暴露</p>
<p>调用其 <code>get()</code> 方法以获取 Python 全局作用域的变量</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">pyodide.<span class="title function_">runPython</span>(<span class="string">&#x27;x = 1&#x27;</span>)</span><br><span class="line">pyodide.<span class="title function_">runPython</span>(<span class="string">`y = &#x27;xes&#x27;`</span>)</span><br><span class="line">pyodide.<span class="title function_">runPython</span>(<span class="string">&#x27;z = [2, 4]&#x27;</span>)</span><br><span class="line"></span><br><span class="line">pyodide.<span class="property">globals</span>.<span class="title function_">get</span>(<span class="string">&#x27;x&#x27;</span>)</span><br><span class="line">pyodide.<span class="property">globals</span>.<span class="title function_">get</span>(<span class="string">&#x27;y&#x27;</span>)</span><br><span class="line">pyodide.<span class="property">globals</span>.<span class="title function_">get</span>(<span class="string">&#x27;z&#x27;</span>).<span class="title function_">toJs</span>()</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Python 中复杂类型变量，如列表等，可以通过调用 <code>toJs()</code> 来转换为一个 JS 对象</p>
</blockquote>
<p>调用其 <code>set()</code> 方法以设置 Python 全局作用域的变量</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">pyodide.<span class="property">globals</span>.<span class="title function_">set</span>(<span class="string">&#x27;xx&#x27;</span>, <span class="string">&#x27;xxxxx&#x27;</span>)</span><br><span class="line">pyodide.<span class="property">globals</span>.<span class="title function_">set</span>(<span class="string">&#x27;alert&#x27;</span>, alert)</span><br><span class="line">pyodide.<span class="property">globals</span>.<span class="title function_">set</span>(<span class="string">&#x27;square&#x27;</span>, <span class="function"><span class="params">x</span> =&gt;</span> x ** <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">pyodide.<span class="title function_">runPython</span>(<span class="string">&#x27;print(xx)&#x27;</span>)</span><br><span class="line">pyodide.<span class="title function_">runPython</span>(<span class="string">`alert(&#x27;xxxx&#x27;)`</span>)</span><br><span class="line">pyodide.<span class="title function_">runPython</span>(<span class="string">&#x27;print(square(20))&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>可以设置普通变量、对象、函数，以及 JS 或 DOM 内置函数等等</p>
<h2 id="Python-获取-JS-作用域"><a href="#Python-获取-JS-作用域" class="headerlink" title="Python 获取 JS 作用域"></a>Python 获取 JS 作用域</h2><p>在 Python 中导入 JS 包以使用 JS 的全局变量</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> js</span><br><span class="line"></span><br><span class="line">js.confirm(<span class="string">&#x27;message&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>使用类似与调用 <code>window</code> 变量</p>
<h2 id="Worker-环境使用"><a href="#Worker-环境使用" class="headerlink" title="Worker 环境使用"></a>Worker 环境使用</h2><p>使用 <code>importScripts()</code> 方法导入 CDN 脚本，随后通过暴露在全局的 <code>loadPyodide()</code> 方法使用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">self.importScripts(<span class="string">&quot;https://cdn.jsdelivr.net/pyodide/v0.24.1/full/pyodide.js&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>特别的，若在 ServiceWorker 中使用，需要导入 XMLHttpRequest 的 shim 包，因为该类在 ServiceWorker 中无法使用但 Pyodide 依赖于该包，如</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">importScripts(<span class="string">&quot;./node_modules/xhr-shim/src/index.js&quot;</span>)</span><br><span class="line">self.<span class="property">XMLHttpRequest</span> = self.<span class="property">XMLHttpRequestShim</span></span><br></pre></td></tr></table></figure>

<p>模块 Worker 环境下需要改变导入方式为 ESM</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;./node_modules/xhr-shim/src/index.js&quot;</span></span><br><span class="line">self.<span class="property">XMLHttpRequest</span> = self.<span class="property">XMLHttpRequestShim</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./pyodide.asm.js&quot;</span></span><br><span class="line"><span class="keyword">import</span> &#123; loadPyodide &#125; <span class="keyword">from</span> <span class="string">&quot;./pyodide.mjs&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="文件系统"><a href="#文件系统" class="headerlink" title="文件系统"></a>文件系统</h2><p>Pyodide 基于 Emscripten File System API 实现了自定义的文件系统</p>
<p>在 Python 环境中直接调用相关文件操作方法；通过 <code>pyodide.FS</code> 对象向浏览器环境暴露对文件系统的操作</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;/hello.txt&quot;</span>, <span class="string">&quot;r&quot;</span>) <span class="keyword">as</span> fh:</span><br><span class="line">      data = fh.read()</span><br><span class="line"><span class="built_in">print</span>(data)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;/hello.txt&quot;</span>, <span class="string">&quot;r&quot;</span>) <span class="keyword">as</span> fh:</span><br><span class="line">      data = fh.read()</span><br><span class="line"><span class="built_in">print</span>(data)</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> file = pyodide.<span class="property">FS</span>.<span class="title function_">readFile</span>(<span class="string">&quot;/hello.txt&quot;</span>, &#123; <span class="attr">encoding</span>: <span class="string">&quot;utf8&quot;</span> &#125;)</span><br><span class="line"></span><br><span class="line">pyodide.<span class="property">FS</span>.<span class="title function_">writeFile</span>(<span class="string">&quot;/hello.txt&quot;</span>, data, &#123; <span class="attr">encoding</span>: <span class="string">&quot;utf8&quot;</span> &#125;)</span><br></pre></td></tr></table></figure>

<p>需要注意的是，Pyodide 默认使用的是 MEMFS，可以通过调用其 mount 方法绑定至其他的文件系统</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pyodide.<span class="property">FS</span>.<span class="title function_">mount</span>(pyodide.<span class="property">FS</span>.<span class="property">filesystems</span>.<span class="property">NODEFS</span>, &#123; <span class="attr">root</span>: <span class="string">&quot;.&quot;</span> &#125;, <span class="string">&quot;/mnt&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>或者可以使用原生 File System API 绑定至 Origin Private File System 或 Native File System</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> root = <span class="keyword">await</span> navigator.<span class="property">storage</span>.<span class="title function_">getDirectory</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> nativefs = <span class="keyword">await</span> pyodide.<span class="title function_">mountNativeFS</span>(<span class="string">&quot;/mnt&quot;</span>, root)</span><br><span class="line"></span><br><span class="line"><span class="keyword">await</span> nativefs.<span class="title function_">syncfs</span>()</span><br></pre></td></tr></table></figure>
</div><div class="index-category-tag"><div class="level-item"><i class="fas fa-folder-open has-text-grey"> </i><a class="article-more button is-small link-muted index-categories" href="/categories/Frontend/">Frontend</a><span> </span><a class="article-more button is-small link-muted index-categories" href="/categories/Frontend/Other/">Other</a></div>  <div class="level-item"><i class="fas fa-tags has-text-grey"> </i><a class="article-more button is-small link-muted index-tags" href="/tags/Frontend/">Frontend</a><span> </span><a class="article-more button is-small link-muted index-tags" href="/tags/Other/">Other</a></div><hr></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><i class="far fa-calendar-plus"> </i>2023-09-30  <a class="commentCountImg" href="/2023/09/30/PWA/#comment-container"><span class="display-none-class">5db42e0fefab976fa37e030172a797d9</span><i class="far fa-comment-dots"></i> <span class="commentCount" id="5db42e0fefab976fa37e030172a797d9">99+</span>  </a><span class="level-item"><i class="far fa-clock"> </i>4 分钟  <i class="fas fa-pencil-alt"> </i>0.7 k</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/09/30/PWA/">PWA</a></h1><div class="content"><p>PWA 即 Progressive Web App ———— 渐进式网络应用</p>
<p>PWA 技术允许用户像 Native 应用一样使用 Web 应用，支持多平台和多设备访问，并且支持在线或离线访问</p>
<p>PWA 技术的核心是 ServiceWorker 技术，并基于 ServiceWorker 技术支持离线访问</p>
<h2 id="PWA-特点"><a href="#PWA-特点" class="headerlink" title="PWA 特点"></a>PWA 特点</h2><ul>
<li>可通过 URL 访问并被搜索引擎抓取</li>
<li>可以安装到本地（A2HS）</li>
<li>可以使用 URL 分享</li>
<li>可以在离线状态访问</li>
<li>适配老版浏览器访问，并支持在新浏览器中使用更多新特性</li>
<li>支持在有新内容时更新</li>
<li>能适配各种尺寸屏幕</li>
<li>仅通过 HTTPS 提供服务</li>
</ul>
<h2 id="PWA-创建"><a href="#PWA-创建" class="headerlink" title="PWA 创建"></a>PWA 创建</h2><ol>
<li><p>页面通过 <code>link</code> 标签引入 <code>manifest</code> 文件</p>
<p> 文件后缀名可以是 json 或者 webapp、webmanifest</p>
 <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;manifest&quot;</span> <span class="attr">href</span>=<span class="string">&quot;manifest.json&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p> 该文件是一个 JSON 的语法，必须指定的项为 <code>name</code>、<code>icons</code>（对于 Chromium 系浏览器 <code>start_url</code>、<code>display</code> 或 <code>display_override</code> 也是需要指定的）</p>
 <figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;My PWA&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;icons&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;src&quot;</span><span class="punctuation">:</span> <span class="string">&quot;icons/512.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;image/png&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;sizes&quot;</span><span class="punctuation">:</span> <span class="string">&quot;512x512&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p> <code>name</code> 指定应用的名称，接受一个字符串</p>
<p> <code>icons</code> 指定应用的图标，接受一个数组，数组各项可以指定 <code>src</code>、<code>sizes</code>、<code>type</code> 项，分别代表图标的 URL、尺寸及 MIME 类型</p>
<p> <code>manifest.json</code> 文件的详细配置可以参考相关的文档</p>
</li>
<li><p>页面中注册 ServiceWorker，且 ServiceWorker 中监听了 <code>fetch</code> 事件</p>
</li>
<li><p>页面须启用 <code>Secure Context</code>，即使用 HTTPS 协议或者为本地资源</p>
</li>
</ol>
<h2 id="PWA-下载"><a href="#PWA-下载" class="headerlink" title="PWA 下载"></a>PWA 下载</h2><p>PWA 下载可以通过浏览器访问对应的网页实现</p>
<p>通常浏览器检测到网页支持下载为 PWA 时，会显示一个默认的“下载为 PWA”的按钮，也可以自定义“下载为 PWA”的按钮</p>
<p>通过监听全局的 <code>beforeinstallprompt</code> 事件获取到 <code>BeforeInstallPromptEvent</code> 事件实例并存储，通常该事件在页面加载时即触发；在必要时刻调用 <code>BeforeInstallPromptEvent.prompt()</code> 方法以使用户确认下载 PWA 应用；下载完成后会在全局触发 <code>appinstalled</code> 事件</p>
<p>PWA 下载亦可以通过应用商店等场景下载</p>
<h2 id="PWA-原理"><a href="#PWA-原理" class="headerlink" title="PWA 原理"></a>PWA 原理</h2><p>PWA 实质是仅将应用行为上类似于原生应用，如在桌面显示图标，在应用列表显示，支持卸载等；并不会将应用程序的资源文件主动下载至本地，具体策略由开发者通过 IndexedDB、ServiceWorker、Cache Storage 等开发实施</p>
<h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/skyclouds2001/Frontend-Learning/blob/main/next-learning/PWA-eg">https://github.com/skyclouds2001/Frontend-Learning/blob/main/next-learning/PWA-eg</a></li>
</ul>
</div><div class="index-category-tag"><div class="level-item"><i class="fas fa-folder-open has-text-grey"> </i><a class="article-more button is-small link-muted index-categories" href="/categories/Frontend/">Frontend</a><span> </span><a class="article-more button is-small link-muted index-categories" href="/categories/Frontend/Other/">Other</a></div>  <div class="level-item"><i class="fas fa-tags has-text-grey"> </i><a class="article-more button is-small link-muted index-tags" href="/tags/Frontend/">Frontend</a><span> </span><a class="article-more button is-small link-muted index-tags" href="/tags/Other/">Other</a></div><hr></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><i class="far fa-calendar-plus"> </i>2023-09-18  <a class="commentCountImg" href="/2023/09/18/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/#comment-container"><span class="display-none-class">04a08c90df7c1c16975a3fbd5ea2e089</span><i class="far fa-comment-dots"></i> <span class="commentCount" id="04a08c90df7c1c16975a3fbd5ea2e089">99+</span>  </a><span class="level-item"><i class="far fa-clock"> </i>29 分钟  <i class="fas fa-pencil-alt"> </i>4.4 k</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/09/18/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/">性能优化</a></h1><div class="content"><h2 id="构建相关"><a href="#构建相关" class="headerlink" title="构建相关"></a>构建相关</h2><h3 id="路由懒加载"><a href="#路由懒加载" class="headerlink" title="路由懒加载"></a>路由懒加载</h3><p>最主要在于降低首屏加载资源大小，仅加载所需的页面资源文件，加快页面的显示</p>
<figure class="highlight js"><figcaption><span>bad</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> C <span class="keyword">from</span> <span class="string">&#x27;c&#x27;</span></span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">component</span>: C,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><figcaption><span>good</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;c&#x27;</span>),</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>原理即将导航中的路由组件从静态 <code>import</code> 导入改为动态 <code>import()</code> 导入</p>
<h3 id="组件懒加载"><a href="#组件懒加载" class="headerlink" title="组件懒加载"></a>组件懒加载</h3><p>原理同路由懒加载</p>
<figure class="highlight js"><figcaption><span>worse</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> C <span class="keyword">from</span> <span class="string">&#x27;c&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">components</span>: &#123;</span><br><span class="line">    C,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><figcaption><span>better</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">C</span> = (<span class="params"></span>) =&gt; <span class="keyword">import</span>(<span class="string">&#x27;c&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">components</span>: &#123;</span><br><span class="line">    C,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>做组件懒加载一般在某些特别条件下使用，如组件仅在特定条件下才展示、当前页面文件过大、组件复用性较强</p>
<h3 id="外部依赖懒加载"><a href="#外部依赖懒加载" class="headerlink" title="外部依赖懒加载"></a>外部依赖懒加载</h3><p>较大外部依赖可动态导入</p>
<figure class="highlight js"><figcaption><span>worse</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> <span class="variable constant_">THREE</span> <span class="keyword">from</span> <span class="string">&#x27;three&#x27;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><figcaption><span>better</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span>(<span class="string">&#x27;three&#x27;</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">THREE</span>) =&gt;</span> &#123; <span class="comment">/* do */</span> &#125;)</span><br></pre></td></tr></table></figure>

<p><em><strong>但建议谨慎采取此方式</strong></em></p>
<h3 id="Tree-Shaking-和-SideEffects"><a href="#Tree-Shaking-和-SideEffects" class="headerlink" title="Tree Shaking 和 SideEffects"></a>Tree Shaking 和 SideEffects</h3><p>依赖 ESM 的静态特性，进行静态分析，在生成产物中去除无用的模块或代码，从而降低生成产物的大小</p>
<p>webpack 默认在构建阶段会启用 Tree Shaking，在开发阶段需手动配置</p>
<figure class="highlight js"><figcaption><span>webpack.config.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line"> <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>,</span><br><span class="line"> <span class="attr">optimization</span>: &#123;</span><br><span class="line">   <span class="attr">usedExports</span>: <span class="literal">true</span>,</span><br><span class="line"> &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><figcaption><span>webpack.config.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line"> <span class="attr">mode</span>: <span class="string">&#x27;production&#x27;</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用副作用</p>
<figure class="highlight json"><figcaption><span>package.json</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;sideEffects&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>某些情况下需手动标记 <code>/*#__PURE__*/</code> 以标记代码，以标记语句是可执行 Tree Shaking 的</p>
<p>vite 原生基于 rollup 支持在构建阶段启用 Tree Shaking</p>
<h3 id="构建产物压缩"><a href="#构建产物压缩" class="headerlink" title="构建产物压缩"></a>构建产物压缩</h3><p><code>webpack</code> 可以使用 <code>terser-webpack-plugin</code> 插件来执行代码构建产物的压缩</p>
<figure class="highlight js"><figcaption><span>webpack.config.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">TerserPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;terser-webpack-plugin&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">optimization</span>: &#123;</span><br><span class="line">    <span class="attr">minimize</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">minimizer</span>: [<span class="keyword">new</span> <span class="title class_">TerserPlugin</span>()],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>vite</code> 内部默认集成 <code>esbuild</code> 进行代码构建产物的压缩，同时支持配置为使用 <code>terser</code> 来执行压缩</p>
<figure class="highlight js"><figcaption><span>vite.config.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">esbuild</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">build</span>: &#123;</span><br><span class="line">    <span class="attr">cssMinify</span>: <span class="string">&#x27;esbuild&#x27;</span>,</span><br><span class="line">    <span class="attr">minify</span>: <span class="string">&#x27;esbuild&#x27;</span>,</span><br><span class="line">    <span class="attr">terserOptions</span>: &#123;&#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">optimizeDeps</span>: &#123;</span><br><span class="line">    <span class="attr">esbuildOptions</span>: &#123;&#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>静态资源构建产物（特别是图片）的压缩可以使用一些插件实现，如 <code>compression-webpack-plugin</code> 等</p>
<h3 id="外部库按需加载"><a href="#外部库按需加载" class="headerlink" title="外部库按需加载"></a>外部库按需加载</h3><p>外部库（特别是 UI 组件库）使用插件（如 <code>babel-plugin-import</code> 等）进行按需加载</p>
<h3 id="代码分割"><a href="#代码分割" class="headerlink" title="代码分割"></a>代码分割</h3><p>可以适当进行代码分割，避免一次性加载过大的资源文件，阻碍页面的展示；也需要避免过度分割，一次性执行过多的资源获取请求</p>
<figure class="highlight js"><figcaption><span>vite.config.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">build</span>: &#123;</span><br><span class="line">    <span class="attr">rollupOptions</span>: &#123;</span><br><span class="line">      <span class="attr">output</span>: &#123;</span><br><span class="line">        <span class="attr">manualChunks</span>: &#123;&#125;,</span><br><span class="line">        <span class="comment">// or: manualChunks: (id) =&gt; id,</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">cssCodeSplit</span>: &#123;&#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="内联代码文件"><a href="#内联代码文件" class="headerlink" title="内联代码文件"></a>内联代码文件</h3><p>部分小体量的 JS 文件或 CSS 文件，可以内联到 HTML 文件中，减少请求的数量</p>
<h3 id="分析外部依赖"><a href="#分析外部依赖" class="headerlink" title="分析外部依赖"></a>分析外部依赖</h3><p>可通过 <code>webpack-bundle-analyzer</code> 插件或 <code>rollup-plugin-visualizer</code> 插件来分析查看</p>
<figure class="highlight js"><figcaption><span>webpack.config.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">BundleAnalyzerPlugin</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;webpack-bundle-analyzer&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">BundleAnalyzerPlugin</span>(),</span><br><span class="line">  ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><figcaption><span>vite.config.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; visualizer &#125; <span class="keyword">from</span> <span class="string">&#x27;rollup-plugin-visualizer&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="title function_">visualizer</span>(),</span><br><span class="line">  ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>检查项目的依赖包是否有重复引用的情况，避免出现使用同样名称不同版本的依赖包引用的情况</p>
<h2 id="渲染相关"><a href="#渲染相关" class="headerlink" title="渲染相关"></a>渲染相关</h2><h3 id="骨架屏"><a href="#骨架屏" class="headerlink" title="骨架屏"></a>骨架屏</h3><p>主要应用于缩短白屏时长，特别是 SPA 单页应用</p>
<p>原理是直接把展示骨架屏的内容放在 html 文件内，在真正内容加载完后再隐藏骨架屏的内容</p>
<h3 id="虚拟滚动"><a href="#虚拟滚动" class="headerlink" title="虚拟滚动"></a>虚拟滚动</h3><p>只渲染可视区域的列表项，非可见区域的不渲染</p>
<p>原理为计算列表的总高度，并在触发滚动事件时根据滚动高度更新起始下标和结束下标，从而取出相应的数据渲染元素</p>
<h3 id="Worker-长任务优化"><a href="#Worker-长任务优化" class="headerlink" title="Worker 长任务优化"></a>Worker 长任务优化</h3><p>将一些长任务逻辑移入到 Worker 中，避免长任务的执行阻碍 UI 渲染而影响用户体验</p>
<p>是否使用 Worker，需要比较 Worker 通信时长与运算时长相比是否具有足够的优势</p>
<h3 id="利用-requestAnimationFrame-周期任务"><a href="#利用-requestAnimationFrame-周期任务" class="headerlink" title="利用 requestAnimationFrame 周期任务"></a>利用 requestAnimationFrame 周期任务</h3><p>可以利用 requestAnimationFrame 处理周期任务</p>
<p>特别是需要较严格固定周期频率执行的情况（setInterval 和 setTimeout 无法保证准确的时间间隔）</p>
<p>同时 requestAnimationFrame 支持在页面隐藏或最小化时暂停执行周期任务，以节省性能（setInterval 和 setTimeout 不会因页面隐藏或最小化等因素暂停执行）</p>
<h3 id="使用-CSS-动画过渡变换替代-JS"><a href="#使用-CSS-动画过渡变换替代-JS" class="headerlink" title="使用 CSS 动画过渡变换替代 JS"></a>使用 CSS 动画过渡变换替代 JS</h3><p>CSS 动画 Animation、过渡 Transition、变换 Transform 相较于 JS 性能通过上更具优势，并且浏览器更易于针对性地做优化</p>
<h3 id="简化-CSS-选择器"><a href="#简化-CSS-选择器" class="headerlink" title="简化 CSS 选择器"></a>简化 CSS 选择器</h3><p>避用通配符选择器 <code>*</code></p>
<p>减少使用标签选择器</p>
<p>优先使用默认的样式继承</p>
<p>避免层数过大的选择器</p>
<h3 id="代码复用及代码封装"><a href="#代码复用及代码封装" class="headerlink" title="代码复用及代码封装"></a>代码复用及代码封装</h3><p>提升代码复用率，进行功能代码封装等</p>
<p>CSS 的样式简化，可以使用 <code>TailwindCSS</code>、<code>UnoCSS</code> 等方案</p>
<h3 id="使用防抖节流"><a href="#使用防抖节流" class="headerlink" title="使用防抖节流"></a>使用防抖节流</h3><p>防抖，使得指定函数至少间隔 n 秒才会执行一次</p>
<p>节流，使得指定函数在 n 秒中最多执行一次</p>
<p>对于容易连续触发的事件，如 <code>mousemove</code>、<code>pointermove</code>、<code>scroll</code>、<code>touchmove</code>、<code>wheel</code>、<code>resize</code> 等，通过将事件处理方法绑定为防抖节流版本的方法，避免持续多次重复执行方法</p>
<h3 id="使用-will-change-优化动态效果"><a href="#使用-will-change-优化动态效果" class="headerlink" title="使用 will-change 优化动态效果"></a>使用 <code>will-change</code> 优化动态效果</h3><p>预先将执行动画的元素设置 <code>will-change</code> CSS 属性，以便浏览器引擎将其视为单独图层来进行优化</p>
<p>注意点是，避免过度应用 <code>will-change</code> 属性；建议仅在需要时候 JS 动态设置该属性</p>
<h3 id="减少页面重排重绘"><a href="#减少页面重排重绘" class="headerlink" title="减少页面重排重绘"></a>减少页面重排重绘</h3><p>重绘指元素的非几何样式改变引起的浏览器重新渲染目标元素的现象</p>
<p>重绘指元素的几何样式改变引起的浏览器重新渲染整个渲染树或的现象</p>
<h3 id="使用-GPU-渲染"><a href="#使用-GPU-渲染" class="headerlink" title="使用 GPU 渲染"></a>使用 GPU 渲染</h3><p>CSS中可使用如下一些方式将目标元素独立为合成层，从而进行独立渲染，以触发 GPU 渲染</p>
<ul>
<li>指定 <code>will-change</code> 属性</li>
<li>3D 或者透视变换 <code>perspective</code> <code>transform</code></li>
<li>使用加速视频解码的 video 元素</li>
<li>拥有 3D 上下文（WebGL）或者加速 2D 上下文的 canvas 元素</li>
<li>使用 opacity、filter 实现 CSS 动画或使用一个动画 webkit 变换的元素</li>
<li>拥有加速 CSS 过滤器的元素</li>
<li>元素有一个包含复合层的后代节点</li>
<li>元素有一个兄弟元素在复合图层渲染，且具备较低的 z-index</li>
</ul>
<h3 id="避免无效请求"><a href="#避免无效请求" class="headerlink" title="避免无效请求"></a>避免无效请求</h3><p>避免出现无效请求，例如表单提交频繁点击的问题，或路由切换时还有未完成的请求；对于服务器和用户来说，会造成不必要的困扰</p>
<h2 id="网络相关"><a href="#网络相关" class="headerlink" title="网络相关"></a>网络相关</h2><h3 id="使用-HTTP2"><a href="#使用-HTTP2" class="headerlink" title="使用 HTTP2"></a>使用 HTTP2</h3><p>HTTP2 支持头部压缩，能够减少数据传输量，节省消息投占用的网络的流量</p>
<p>且 HTTP2 支持多路复用、服务器推送等功能</p>
<h3 id="gzip-压缩"><a href="#gzip-压缩" class="headerlink" title="gzip 压缩"></a>gzip 压缩</h3><p>HTTP 头部及资源启用 gzip 压缩，能够大大减少网络传输的数据量</p>
<p>可以使用 <code>compression-webpack-plugin</code> 或 <code>vite-plugin-compression</code> 压缩打包资源至 gzip</p>
<figure class="highlight js"><figcaption><span>webpack.config.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> compression = <span class="built_in">require</span>(<span class="string">&#x27;compression-webpack-plugin&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="keyword">new</span> <span class="title function_">compression</span>()],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><figcaption><span>vite.config.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> compression <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-compression&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="title function_">compression</span>()]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>对资源服务开启 gzip 支持</p>
<figure class="highlight plaintext"><figcaption><span>nginx.conf</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">gzip on;</span><br><span class="line">gzip_min_length 1k;</span><br><span class="line">gzip_comp_level 5;</span><br><span class="line">gzip_buffers 16 8k;</span><br><span class="line">gzip_http_version 1.1;</span><br><span class="line">gzip_types text/plain application/javascript application/x-javascript text/javascript text/xml text/css;</span><br><span class="line">gzip_disable &quot;MSIE [1-6]\.&quot;;</span><br><span class="line">gzip_proxied any;</span><br><span class="line">gzip_vary on;</span><br></pre></td></tr></table></figure>

<p>一般推荐提前处理完成 gzip 文件，再直接交由 nginx 服务</p>
<h3 id="Cookie-简化"><a href="#Cookie-简化" class="headerlink" title="Cookie 简化"></a>Cookie 简化</h3><p>执行网络请求时，浏览器会自动带上同源的 Cookie 信息，一定程度上会增大请求头的大小</p>
<p>可以通过精简 Cookie 的内容，来降低请求信息的大小</p>
<p>同时可以对静态资源单独部署，避免请求携带不必要的 Cookie 信息</p>
<h3 id="启用-Keep-Alive"><a href="#启用-Keep-Alive" class="headerlink" title="启用 Keep-Alive"></a>启用 Keep-Alive</h3><p>通过给请求头或响应头设置 Keep-Alive 头，通常用于提示连接超时时间和最大请求量</p>
<figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Connection</span><span class="punctuation">: </span>Keep-Alive</span><br><span class="line"><span class="attribute">Keep-Alive</span><span class="punctuation">: </span>timeout=5, max=1000</span><br></pre></td></tr></table></figure>

<h3 id="减少预检请求发起"><a href="#减少预检请求发起" class="headerlink" title="减少预检请求发起"></a>减少预检请求发起</h3><p>可以在跨域请求设置 <code>Access-Control-Max-Age</code> 响应头指定预检请求的缓存期限，从而在指定期限内的跨域请求无需进行预检请求可以直接发起请求</p>
<figure class="highlight http"><figcaption><span>有效期 10min</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Access-Control-Max-Age</span><span class="punctuation">: </span>600</span><br></pre></td></tr></table></figure>

<h2 id="资源相关"><a href="#资源相关" class="headerlink" title="资源相关"></a>资源相关</h2><h3 id="script-加载方式"><a href="#script-加载方式" class="headerlink" title="script 加载方式"></a>script 加载方式</h3><ul>
<li>正常模式</li>
</ul>
<p>JS 会阻碍 DOM 渲染</p>
<p><code>&lt;script src=&quot;main.js&quot;&gt;&lt;/script&gt;</code></p>
<ul>
<li><code>async</code> 模式</li>
</ul>
<p>异步加载 JS，执行无顺序，加载完成后立即执行</p>
<p>可以用于加载与 DOM 无关的 JS 资源，如埋点统计等</p>
<p><code>&lt;script async src=&quot;main.js&quot;&gt;&lt;/script&gt;</code></p>
<ul>
<li><code>defer</code> 模式</li>
</ul>
<p>异步加载 JS，执行有顺序，加载完成后统一在 DOMContentLoaded 事件触发前执行</p>
<p>一般情况均可使用 defer 优化 JS 资源的加载，避免 JS 脚本加载与执行阻碍网页的渲染</p>
<p><code>&lt;script defer src=&quot;main.js&quot;&gt;&lt;/script&gt;</code></p>
<ul>
<li><code>module</code> 模式</li>
</ul>
<p>行为上会类似于 defer 模式</p>
<p><code>&lt;script type=&quot;module&quot; src=&quot;main.js&quot;&gt;&lt;/script&gt;</code></p>
<ul>
<li><code>fetchpriority</code> 资源加载优先级</li>
</ul>
<p>可以利用 <code>fetchpriority</code> HTML 属性指定 script 脚本加载的优先级，优先加载级别高的脚本，延后加载级别低的脚本</p>
<h3 id="资源预加载"><a href="#资源预加载" class="headerlink" title="资源预加载"></a>资源预加载</h3><p>需要避免 <code>preload</code> 和 <code>prefetch</code> 的混用，以避免不必要的二次自由加载</p>
<ul>
<li><code>preload</code></li>
</ul>
<p>预先下载当前页面将使用的资源并缓存（不会执行），会提升资源的优先级</p>
<p>需同时指定 <code>as</code> 属性与 <code>href</code> 属性</p>
<p><code>&lt;link rel=&quot;preload&quot; href=&quot;style.css&quot; as=&quot;style&quot; /&gt;</code></p>
<p><code>&lt;link rel=&quot;preload&quot; href=&quot;main.js&quot; as=&quot;script&quot; /&gt;</code></p>
<p>建议指定 <code>type</code> 属性，以避免浏览器下载格式不支持的资源</p>
<p>建议同时指定 <code>crossorigin</code> 属性</p>
<ul>
<li><code>prefetch</code></li>
</ul>
<p>预加载未来页面将使用的资源，并保存在缓存内一段时间，会降低资源的优先级</p>
<p>要求当前页面需为安全上下文</p>
<p><code>&lt;link rel=&quot;prefetch&quot; href=&quot;main.js&quot; /&gt;</code></p>
<ul>
<li><code>modulepreload</code></li>
</ul>
<p>类似于 <code>preload</code></p>
<p>预加载当前页面将使用的模块脚本资源，并进行解析与执行</p>
<p><code>&lt;link rel=&quot;modulepreload&quot; href=&quot;main.js&quot; /&gt;</code></p>
<ul>
<li><code>prerender</code></li>
</ul>
<p>预加载目标资源并提前在后台处理执行</p>
<p>仅部分浏览器支持该非标准特性</p>
<h3 id="网络预连接"><a href="#网络预连接" class="headerlink" title="网络预连接"></a>网络预连接</h3><p>一般情况下，<code>dns-prefetch</code> 与 <code>preconnect</code> 都是配对使用</p>
<p>但不建议过度使用 <code>preconnect</code>，仅用于未来一段时间极可能访问或请求的 origin；否则仅应用 <code>dns-prefetch</code></p>
<p>同时 <code>dns-prefetch</code> 的浏览器兼容性优于 <code>preconnect</code></p>
<p>建议使用以上两属性的同时指定 <code>crossorigin</code> 属性</p>
<ul>
<li><code>dns-prefetch</code></li>
</ul>
<p>提前执行目标 origin 的 DNS 解析，可以加快未来将访问或请求的 origin 的处理速度（直接使用已预先解析的 DNS 缓存）</p>
<p><code>&lt;link rel=&quot;dns-prefetch&quot; href=&quot;https://fonts.googleapis.com/&quot; /&gt;</code></p>
<ul>
<li><code>preconnect</code></li>
</ul>
<p>提前执行目标 origin 的连接 —— DNS 解析、TCP 连接（及 TLS 握手），可以加快未来将访问或请求的 origin 的处理速度</p>
<p><code>&lt;link rel=&quot;preconnect&quot; href=&quot;https://fonts.googleapis.com/&quot; /&gt;</code></p>
<h3 id="避用外部依赖"><a href="#避用外部依赖" class="headerlink" title="避用外部依赖"></a>避用外部依赖</h3><p>尽量减少对非必要的外部依赖的使用，使用轻量级别替代方案或者自行实现</p>
<p>常见的如：</p>
<p>使用轻量级 <code>day.js</code> 替代 <code>moment.js</code></p>
<p>使用 ESM 的 <code>lodash-es</code> 替代 CJS 的 <code>lodash</code></p>
<h3 id="使用-CDN-服务静态资源"><a href="#使用-CDN-服务静态资源" class="headerlink" title="使用 CDN 服务静态资源"></a>使用 CDN 服务静态资源</h3><p>CDN 即 Content Delivery Network，其具有分布于多个地域的服务器阵列</p>
<p>CDN 可以降低私有服务器的访问压力</p>
<p>地理位置的距离可能相对更近，一定程度上可以降低网络资源加载的时延</p>
<p>CDN 保证了比较正确的缓存配置</p>
<h3 id="合理配置缓存策略"><a href="#合理配置缓存策略" class="headerlink" title="合理配置缓存策略"></a>合理配置缓存策略</h3><p>服务器在响应资源时，通过指定 <code>Expires</code> 响应头或 <code>Cache-Control</code> 响应头来控制浏览器该资源的缓存策略；若被指定为强缓存并且在有效期内直接使用缓存；反之若为被禁止使用缓存，则进行协商缓存，通过 <code>If-Modified-Since</code> 头向服务器提供浏览器缓存的资源的修改时间（在获取资源时服务器通过 <code>Last-Modified</code> 头指定）或通过 <code>If-None-Match</code> 头向服务器提供浏览器缓存的资源的标识符（在获取资源时服务器通过 <code>ETag</code> 头指定）</p>
<ul>
<li><p><code>Expires</code>（推荐使用 <code>Cache-Control</code> 代替，其优先级更高）【响应头】</p>
<p>指定缓存失效的时间</p>
</li>
<li><p><code>Cache-Control</code>【响应头，请求头】</p>
<p>配置缓存的策略及有效期</p>
<ul>
<li><p><code>no-store</code> 不允许缓存</p>
</li>
<li><p><code>no-cache</code> 允许缓存，但使用前需进行服务端验证</p>
</li>
<li><p><code>must-revalidate</code> 允许缓存，有效期内直接使用缓存，超出有效期需进行服务端验证，通常结合 max-age&#x3D;N 使用</p>
</li>
<li><p><code>max-age=N</code> 指定缓存的有效期</p>
</li>
</ul>
</li>
<li><p><code>Last-Modified</code>【响应头】&#x2F; <code>If-Modified-Since</code>【请求头】</p>
<p>资源最近修改时间</p>
</li>
<li><p><code>ETag</code>【响应头】&#x2F; <code>If-None-Match</code>【请求头】</p>
<p>资源唯一标识符</p>
</li>
</ul>
<h3 id="ServiceWorker-实现可控缓存"><a href="#ServiceWorker-实现可控缓存" class="headerlink" title="ServiceWorker 实现可控缓存"></a><code>ServiceWorker</code> 实现可控缓存</h3><p>利用 ServiceWorker 结合 CacheStorage 实现可控缓存，原理是基于受 ServiceWorker 控制的上下文会在 ServiceWorker 全局触发 <code>fetch</code> 事件，可以通过调用返回的 <code>FetchEvent</code> 的 <code>respondWith()</code> 方法自定义响应</p>
<h2 id="图片字体相关"><a href="#图片字体相关" class="headerlink" title="图片字体相关"></a>图片字体相关</h2><h3 id="webp-图片"><a href="#webp-图片" class="headerlink" title="webp 图片"></a><code>webp</code> 图片</h3><p>webp 格式图片大小通常比同等情况下的其他格式图片大小有较大优势，因此若浏览器支持 webp 格式图片，优先使用 webp 格式图片</p>
<p>可以利用离线或在线 webp 图片格式转换工具转换图片格式为 webp</p>
<h3 id="图片懒加载"><a href="#图片懒加载" class="headerlink" title="图片懒加载"></a>图片懒加载</h3><ul>
<li><p>JS 手动控制</p>
<p>初始不指定图片标签的 <code>src</code> 属性，直到图片需要展示时再指定其 <code>src</code> 属性，避免图片的自动预加载</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">data-src</span>=<span class="string">&quot;/img/png&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 适当情况下调用该方法</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">loadImg</span>(<span class="params">el</span>) &#123;</span><br><span class="line">  el.<span class="property">src</span> = el.<span class="title function_">getAttribute</span>(<span class="string">&#x27;data-src&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>利用 img 标签特性（更推荐）</p>
<p>可以设置 <code>img</code> 标签的 <code>loading</code> 属性实现懒加载功能，将属性值指定为 <code>lazy</code> 以惰性加载图片</p>
<p>同时可以指定 <code>img</code> 标签的 <code>fetchpriority</code> 属性，以控制获取图片资源的优先级，设定为 <code>high</code> 以提升获取的优先级，设定为 <code>low</code> 以降低获取的优先级</p>
<p>同时可以指定 <code>img</code> 标签的 <code>decoding</code> 属性，以设定解码图片的模式（是否允许在图片解码完成前展示图片），设定为 <code>sync</code> 以同步解码图片，设定为 <code>async</code> 以异步解码图片</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;/img/png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">loading</span>=<span class="string">&quot;lazy&quot;</span> <span class="attr">fetchpriority</span>=<span class="string">&quot;auto&quot;</span> <span class="attr">decoding</span>=<span class="string">&quot;auto&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="字体图标"><a href="#字体图标" class="headerlink" title="字体图标"></a>字体图标</h3><p>将小图标利用字体形式加载，如 IconFont</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@import</span> url(<span class="string">&#x27;//at.alicdn.com/t/font_8d5l8fzk5b87iudi.css&#x27;</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-xxx&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>通常加载资源大小会更小，并且能够避免重复加载图片并降低请求数量，且支持修改各类字体样式</p>
<h3 id="内联图片"><a href="#内联图片" class="headerlink" title="内联图片"></a>内联图片</h3><p>将小图片转换为 base64 编码内联入 html 文档，可以减少请求数量</p>
<p>webpack 中可以使用 <code>url-loader</code> 插件自动转换内联图片</p>
<figure class="highlight ts"><figcaption><span>webpack.config.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(png|jpg|gif)$/i</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">loader</span>: <span class="string">&#x27;url-loader&#x27;</span>,</span><br><span class="line">            <span class="attr">options</span>: &#123;</span><br><span class="line">              <span class="attr">limit</span>: <span class="number">1024</span> * <span class="number">8</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>vite 原生支持内联图片，默认在图片大小小于 4KB 时启用</p>
<p>可以通过 <code>build.assetsInlineLimit</code> 选项配置启用的阈值</p>
<figure class="highlight js"><figcaption><span>vite.config.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">build</span>: &#123;</span><br><span class="line">    <span class="attr">assetsInlineLimit</span>: <span class="number">4096</span>,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="图片裁剪"><a href="#图片裁剪" class="headerlink" title="图片裁剪"></a>图片裁剪</h3><p>对图片生成多个尺寸的备用图片，使用时根据需要加载不同尺寸的图片，减少不必要的资源流量</p>
<h3 id="图片单独部署"><a href="#图片单独部署" class="headerlink" title="图片单独部署"></a>图片单独部署</h3><p>将图片等静态资源部署在单独的静态资源服务器或是 CDN 上，避免直接打包到项目中</p>
<h3 id="图片尺寸指定"><a href="#图片尺寸指定" class="headerlink" title="图片尺寸指定"></a>图片尺寸指定</h3><p>设置图片标签的尺寸大小，防止图片加载中导致页面布局抖动，影响 CLS 指标</p>
<h3 id="字体按需生成"><a href="#字体按需生成" class="headerlink" title="字体按需生成"></a>字体按需生成</h3><p>使用第三方字体库时，尽可能按需生成，避免不必要的全量引入字体库</p>
<h2 id="代码相关"><a href="#代码相关" class="headerlink" title="代码相关"></a>代码相关</h2><h3 id="JSON-字符串使用"><a href="#JSON-字符串使用" class="headerlink" title="JSON 字符串使用"></a>JSON 字符串使用</h3><p>对于大对象数据，尽量采用 JSON 格式而非 JS 对象格式，因为 JSON 语法比 JS 简单，解析速度更快</p>
<p>如 vite 支持将 JSON 文件打包为 JSON 字符串而非 JS 对象</p>
<figure class="highlight js"><figcaption><span>vite.config.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">json</span>: &#123;</span><br><span class="line">    <span class="attr">stringify</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="if-逻辑提前跳出"><a href="#if-逻辑提前跳出" class="headerlink" title="if 逻辑提前跳出"></a>if 逻辑提前跳出</h3><p>提前结束的逻辑利于编译器的优化</p>
<figure class="highlight js"><figcaption><span>bad</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (A) &#123;</span><br><span class="line">    <span class="keyword">if</span> (B) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&#x27;good&#x27;</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&#x27;bad&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;bad&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><figcaption><span>good</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (A &amp;&amp; B) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;good&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;bad&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>逻辑能提前结束就提前结束</p>
<h3 id="switch-连续值优化"><a href="#switch-连续值优化" class="headerlink" title="switch 连续值优化"></a>switch 连续值优化</h3><p>switch 对于连续值会处理成数组，而数组会具有更高效率的随机访问性能</p>
<figure class="highlight js"><figcaption><span>bad</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">get</span>(<span class="params"><span class="comment">/* @type &#123;1 - 10&#125; */</span> level</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (level &gt;= <span class="number">10</span>) <span class="keyword">return</span> <span class="number">100</span></span><br><span class="line">  <span class="keyword">if</span> (level &gt;= <span class="number">9</span>) <span class="keyword">return</span> <span class="number">80</span></span><br><span class="line">  <span class="keyword">if</span> (level &gt;= <span class="number">6</span>) <span class="keyword">return</span> <span class="number">50</span></span><br><span class="line">  <span class="keyword">if</span> (level &gt;= <span class="number">1</span>) <span class="keyword">return</span> <span class="number">20</span></span><br><span class="line">  <span class="keyword">return</span> <span class="number">10</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><figcaption><span>good</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getPrice</span>(<span class="params">level</span>) &#123;</span><br><span class="line">  <span class="keyword">switch</span>(level) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">10</span>: <span class="keyword">return</span> <span class="number">100</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">9</span>: <span class="keyword">return</span> <span class="number">80</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">8</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="number">7</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="number">6</span>: <span class="keyword">return</span> <span class="number">50</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>: <span class="keyword">return</span> <span class="number">20</span></span><br><span class="line">    <span class="attr">default</span>: <span class="keyword">return</span> <span class="number">10</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>若条件可以处理成连续的数字，可以使用 switch 来进行优化</p>
<h3 id="循环减少执行次数"><a href="#循环减少执行次数" class="headerlink" title="循环减少执行次数"></a>循环减少执行次数</h3><p>对于循环，满足条件或完成任务后即刻跳出，避免不必要的执行损耗</p>
<figure class="highlight js"><figcaption><span>bad</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">find</span>(<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> result = <span class="literal">null</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; data.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (data[i].<span class="property">key</span> === <span class="variable constant_">KEY</span>) &#123;</span><br><span class="line">      result = data[i]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><figcaption><span>good</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">find</span>(<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; data.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (data[i].<span class="property">key</span> === <span class="variable constant_">KEY</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> data[i]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="提取集合数组长度"><a href="#提取集合数组长度" class="headerlink" title="提取集合数组长度"></a>提取集合数组长度</h3><p>在循环处理数组、集合等容器的元素，若可以保证容器的容量不会发生变化，可以提前提取容器的容量，避免在循环中重复获取</p>
<h3 id="适当使用位运算"><a href="#适当使用位运算" class="headerlink" title="适当使用位运算"></a>适当使用位运算</h3><p>对于一些和 2 相关的乘除法或者条件相关的，可以用位运算替代</p>
<figure class="highlight js"><figcaption><span>bad</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> A = <span class="number">2</span> ** <span class="number">8</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><figcaption><span>good</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> A = <span class="number">2</span> &lt;&lt; <span class="number">3</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">isPowerOfTwo</span> = n =&gt; (n &gt; <span class="number">0</span>) &amp;&amp; (n &amp; (n - <span class="number">1</span>) === <span class="number">0</span>)</span><br></pre></td></tr></table></figure>
</div><div class="index-category-tag"><div class="level-item"><i class="fas fa-folder-open has-text-grey"> </i><a class="article-more button is-small link-muted index-categories" href="/categories/Frontend/">Frontend</a><span> </span><a class="article-more button is-small link-muted index-categories" href="/categories/Frontend/Other/">Other</a></div>  <div class="level-item"><i class="fas fa-tags has-text-grey"> </i><a class="article-more button is-small link-muted index-tags" href="/tags/Frontend/">Frontend</a><span> </span><a class="article-more button is-small link-muted index-tags" href="/tags/Other/">Other</a></div><hr></div></article></div><div class="card widget"><div class="g-ads-x"><div class="card-content"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-6540459960525651" data-ad-slot="3012941103"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></div></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><i class="far fa-calendar-plus"> </i>2022-12-14  <a class="commentCountImg" href="/2022/12/14/svg/#comment-container"><span class="display-none-class">d7f13d08487accd84996776991467b46</span><i class="far fa-comment-dots"></i> <span class="commentCount" id="d7f13d08487accd84996776991467b46">99+</span>  </a><span class="level-item"><i class="far fa-clock"> </i>2 分钟  <i class="fas fa-pencil-alt"> </i>0.3 k</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/12/14/svg/">svg</a></h1><div class="content"><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">width</span>=<span class="string">&quot;500&quot;</span> <span class="attr">height</span>=<span class="string">&quot;500&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-color: #eee;&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- 矩形 rect --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">rect</span> <span class="attr">width</span>=<span class="string">&quot;100&quot;</span> <span class="attr">height</span>=<span class="string">&quot;100&quot;</span> <span class="attr">x</span>=<span class="string">&quot;100&quot;</span> <span class="attr">y</span>=<span class="string">&quot;100&quot;</span> <span class="attr">rx</span>=<span class="string">&quot;10&quot;</span> <span class="attr">ry</span>=<span class="string">&quot;10&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 圆形 circle --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">circle</span> <span class="attr">cx</span>=<span class="string">&quot;250&quot;</span> <span class="attr">cy</span>=<span class="string">&quot;250&quot;</span> <span class="attr">r</span>=<span class="string">&quot;100&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">circle</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 椭圆  ellipse--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ellipse</span> <span class="attr">cx</span>=<span class="string">&quot;475&quot;</span> <span class="attr">cy</span>=<span class="string">&quot;450&quot;</span> <span class="attr">rx</span>=<span class="string">&quot;25&quot;</span> <span class="attr">ry</span>=<span class="string">&quot;50&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ellipse</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 直线 line --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">line</span> <span class="attr">x1</span>=<span class="string">&quot;0&quot;</span> <span class="attr">y1</span>=<span class="string">&quot;0&quot;</span> <span class="attr">x2</span>=<span class="string">&quot;500&quot;</span> <span class="attr">y2</span>=<span class="string">&quot;500&quot;</span> <span class="attr">stroke</span>=<span class="string">&quot;green&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">line</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 折线 polyline --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">polyline</span> <span class="attr">points</span>=<span class="string">&quot;500 0, 100 100, 0 500&quot;</span> <span class="attr">stroke</span>=<span class="string">&quot;blue&quot;</span> <span class="attr">fill</span>=<span class="string">&quot;none&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">polyline</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 多边形 polygon --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">polygon</span> <span class="attr">points</span>=<span class="string">&quot;500 0, 400 400, 0 500&quot;</span> <span class="attr">stroke</span>=<span class="string">&quot;none&quot;</span> <span class="attr">fill</span>=<span class="string">&quot;green&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">polygon</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 直线路径 path --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M 0 0 L 50 50 L 50 100 L 100 400 L 400 400 L 400 100 L 50 50 Z&quot;</span> <span class="attr">stroke</span>=<span class="string">&quot;orange&quot;</span> <span class="attr">fill</span>=<span class="string">&quot;none&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M 0 0 l 250 150 l 100 0 l 0 -100 l 50 50 l 50 0 l 0 350 l -350 0 l 0 -50 l -50 -50 l 100 0 l 0 -100 Z&quot;</span> <span class="attr">stroke</span>=<span class="string">&quot;red&quot;</span> <span class="attr">fill</span>=<span class="string">&quot;none&quot;</span> <span class="attr">stroke-width</span>=<span class="string">&quot;5&quot;</span> <span class="attr">stroke-dasharray</span>=<span class="string">&quot;25 5 10 5&quot;</span> <span class="attr">stroke-dashoffset</span>=<span class="string">&quot;5&quot;</span> <span class="attr">stroke-linecap</span>=<span class="string">&quot;round&quot;</span> <span class="attr">stroke-linejoin</span>=<span class="string">&quot;round&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    属性样式  直接设置在元素属性上</span></span><br><span class="line"><span class="comment">    内联样式  设置在元素 style 属性内</span></span><br><span class="line"><span class="comment">    内部样式  写在 style 标签内</span></span><br><span class="line"><span class="comment">    外部样式  写在独立的 css 文件中</span></span><br><span class="line"><span class="comment">   --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    svg 常见属性</span></span><br><span class="line"><span class="comment">      fill 填充颜色</span></span><br><span class="line"><span class="comment">      stroke 描边颜色</span></span><br><span class="line"><span class="comment">      fill-opacity 填充颜色的不透明度</span></span><br><span class="line"><span class="comment">      stroke-opacity 描边颜色的不透明度</span></span><br><span class="line"><span class="comment">      stroke-width 描边宽度</span></span><br><span class="line"><span class="comment">      stroke-dasharray 描边样式 - 可以用于设置虚线</span></span><br><span class="line"><span class="comment">      stroke-dashoffset 设置偏移量</span></span><br><span class="line"><span class="comment">      stroke-linecap 线帽样式</span></span><br><span class="line"><span class="comment">        butt 平头 | 默认</span></span><br><span class="line"><span class="comment">        round 圆头</span></span><br><span class="line"><span class="comment">        square 方头</span></span><br><span class="line"><span class="comment">      stroke-linejoin 拐角样式</span></span><br><span class="line"><span class="comment">        miter 尖角 | 默认</span></span><br><span class="line"><span class="comment">        round 圆角</span></span><br><span class="line"><span class="comment">        bevel 平角</span></span><br><span class="line"><span class="comment">      shape-rendering 消除锯齿</span></span><br><span class="line"><span class="comment">        crispEdges 关闭反锯齿功能</span></span><br><span class="line"><span class="comment">        geometricPrecision 开启反锯齿功能</span></span><br><span class="line"><span class="comment">   --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    svg 支持颜色</span></span><br><span class="line"><span class="comment">      颜色关键字</span></span><br><span class="line"><span class="comment">      十六进制</span></span><br><span class="line"><span class="comment">      RGB 和 RGBA</span></span><br><span class="line"><span class="comment">      HSL 和 HSLA</span></span><br><span class="line"><span class="comment">   --&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!-- 文本元素 text --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">text</span> <span class="attr">x</span>=<span class="string">&quot;250&quot;</span> <span class="attr">y</span>=<span class="string">&quot;250&quot;</span> <span class="attr">fill</span>=<span class="string">&quot;pink&quot;</span> <span class="attr">font-size</span>=<span class="string">&quot;50&quot;</span> <span class="attr">font-weight</span>=<span class="string">&quot;bold&quot;</span> <span class="attr">text-decoration</span>=<span class="string">&quot;underline&quot;</span> <span class="attr">text-anchor</span>=<span class="string">&quot;middle&quot;</span> <span class="attr">dominant-baseline</span>=<span class="string">&quot;middle&quot;</span>&gt;</span>SVG<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 多行文本 tspan --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">text</span> <span class="attr">font-size</span>=<span class="string">&quot;25&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tspan</span> <span class="attr">x</span>=<span class="string">&quot;400&quot;</span> <span class="attr">y</span>=<span class="string">&quot;380&quot;</span>&gt;</span>S<span class="tag">&lt;/<span class="name">tspan</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tspan</span> <span class="attr">x</span>=<span class="string">&quot;400&quot;</span> <span class="attr">y</span>=<span class="string">&quot;400&quot;</span>&gt;</span>V<span class="tag">&lt;/<span class="name">tspan</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tspan</span> <span class="attr">x</span>=<span class="string">&quot;400&quot;</span> <span class="attr">y</span>=<span class="string">&quot;420&quot;</span>&gt;</span>G<span class="tag">&lt;/<span class="name">tspan</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    文本元素属性</span></span><br><span class="line"><span class="comment">      font-size 字号</span></span><br><span class="line"><span class="comment">      font-weight 粗体</span></span><br><span class="line"><span class="comment">      text-decoration 装饰线</span></span><br><span class="line"><span class="comment">      text-anchor 水平对齐方式</span></span><br><span class="line"><span class="comment">      dominant-baseline 垂直对齐方式</span></span><br><span class="line"><span class="comment">      writing-mode 文字方向</span></span><br><span class="line"><span class="comment">   --&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- 超链接 a --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">xlink:href</span>=<span class="string">&quot;https://developer.mozilla.org/zh-CN/docs/Web/SVG&quot;</span> <span class="attr">xlink:title</span>=<span class="string">&quot;svg&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">x</span>=<span class="string">&quot;50&quot;</span> <span class="attr">y</span>=<span class="string">&quot;50&quot;</span> <span class="attr">font-size</span>=<span class="string">&quot;25&quot;</span>&gt;</span>SVG<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- 图片 image --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">image</span> <span class="attr">xlink:href</span>=<span class="string">&quot;https://img.zcool.cn/community/0167b95fc9ea7a11013ee04dc55982.jpg@1280w_1l_2o_100sh.jpg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;50&quot;</span> <span class="attr">height</span>=<span class="string">&quot;50&quot;</span> <span class="attr">x</span>=<span class="string">&quot;100&quot;</span> <span class="attr">y</span>=<span class="string">&quot;100&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br></pre></td></tr></table></figure>
</div><div class="index-category-tag"><div class="level-item"><i class="fas fa-folder-open has-text-grey"> </i><a class="article-more button is-small link-muted index-categories" href="/categories/Frontend/">Frontend</a><span> </span><a class="article-more button is-small link-muted index-categories" href="/categories/Frontend/Other/">Other</a></div>  <div class="level-item"><i class="fas fa-tags has-text-grey"> </i><a class="article-more button is-small link-muted index-tags" href="/tags/Frontend/">Frontend</a><span> </span><a class="article-more button is-small link-muted index-tags" href="/tags/Other/">Other</a></div><hr></div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2022/12/14/typescript/"><img class="fill" src="https://tse2-mm.cn.bing.net/th/id/OIP-C.X6S_XCoE1pfm6fKK2zpQNwHaD4" alt="typescript"></a></div><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><i class="far fa-calendar-plus"> </i>2022-12-14  <a class="commentCountImg" href="/2022/12/14/typescript/#comment-container"><span class="display-none-class">984ac7c46a99cb793890830c6fa35c31</span><i class="far fa-comment-dots"></i> <span class="commentCount" id="984ac7c46a99cb793890830c6fa35c31">99+</span>  </a><span class="level-item"><i class="far fa-clock"> </i>8 分钟  <i class="fas fa-pencil-alt"> </i>1.2 k</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/12/14/typescript/">typescript</a></h1><div class="content"><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/** TS变量类型 */</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">an</span>: <span class="built_in">any</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">str</span>: <span class="built_in">string</span> = <span class="string">&#x27;12&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">num</span>: <span class="built_in">number</span> = <span class="number">20</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">flag</span>: <span class="built_in">boolean</span> = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">arr</span>: <span class="built_in">number</span>[] = [<span class="number">1</span>];</span><br><span class="line"><span class="keyword">let</span> <span class="attr">ar</span>: <span class="title class_">Array</span>&lt;<span class="built_in">number</span>&gt; = [<span class="number">2</span>];</span><br><span class="line"><span class="keyword">let</span> <span class="attr">tuple</span>: [<span class="built_in">string</span>, <span class="built_in">number</span>] = [<span class="string">&#x27;test&#x27;</span>, <span class="number">10</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Color</span> &#123;</span><br><span class="line">  <span class="title class_">Red</span>,</span><br><span class="line">  <span class="title class_">Green</span>,</span><br><span class="line">  <span class="title class_">Blue</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">co</span>: <span class="title class_">Color</span> = <span class="title class_">Color</span>.<span class="property">Red</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">hello</span>(<span class="params"></span>): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hello&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">nu</span>: <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">un</span>: <span class="literal">undefined</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">ne</span>: <span class="built_in">never</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** 类型断言 */</span></span><br><span class="line"><span class="keyword">var</span> <span class="attr">num0</span>: <span class="built_in">number</span> = &lt;<span class="built_in">number</span>&gt; &lt;<span class="built_in">any</span>&gt; str;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** 类型推断 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 变量作用域</span></span><br><span class="line"><span class="comment"> * - 全局作用域</span></span><br><span class="line"><span class="comment"> * - 类作用域</span></span><br><span class="line"><span class="comment"> * - 局部作用域</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/** 运算符 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/** 条件 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/** 循环 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/** 函数 */</span></span><br><span class="line"><span class="comment">// 可选参数 默认参数 剩余参数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">x: <span class="built_in">number</span> = <span class="number">0</span>, y: <span class="built_in">number</span> = <span class="number">0</span>, z?: <span class="built_in">number</span><span class="comment">/* 可选参数: 必须在参数列表最后 */</span>, ...other: <span class="built_in">number</span>[]</span>): <span class="built_in">number</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> x + y + (z ?? <span class="number">0</span>) + <span class="title function_">add</span>(...other);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> sub = (<span class="attr">x</span>: <span class="built_in">number</span>, <span class="attr">y</span>: <span class="built_in">number</span>): <span class="function"><span class="params">number</span> =&gt;</span> x - y</span><br><span class="line"><span class="keyword">const</span> <span class="attr">add_plus</span>: <span class="function">(<span class="params">x: <span class="built_in">number</span>, y:<span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">number</span> = <span class="function">(<span class="params">x, y</span>) =&gt;</span> x + y;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 匿名函数 自动执行函数 递归函数 箭头函数</span></span><br><span class="line"><span class="keyword">var</span> res = <span class="keyword">function</span>(<span class="params">a: <span class="built_in">number</span>, b: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> a * b;</span><br><span class="line">&#125;;</span><br><span class="line">(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Hello!&#x27;</span>))();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数重载</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/** 字面量类型 */</span></span><br><span class="line"><span class="comment">// 使用具体值作为类型</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">fu</span>: <span class="string">&#x27;0&#x27;</span> | <span class="string">&#x27;1&#x27;</span> | <span class="string">&#x27;2&#x27;</span> | <span class="string">&#x27;3&#x27;</span> = <span class="string">&#x27;1&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> fv = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** Number String Boolean 包装类型 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/** Array 数组 元组 Map */</span></span><br><span class="line"><span class="comment">// 数组</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">arr1</span>: <span class="built_in">number</span>[] = [<span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line"><span class="keyword">let</span> <span class="attr">arr2</span>: <span class="title class_">Array</span>&lt;<span class="built_in">number</span>&gt; = [<span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="comment">// 元组 Tuple</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">position</span>: [<span class="built_in">number</span>, <span class="built_in">string</span>, <span class="built_in">boolean</span>] = [<span class="number">1</span>, <span class="string">&#x27;2&#x27;</span>, <span class="literal">true</span>];</span><br><span class="line"><span class="comment">// Map</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">m</span>: <span class="title class_">Map</span>&lt;<span class="built_in">number</span>, <span class="built_in">number</span>&gt; = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">/** 联合类型 */</span></span><br><span class="line"><span class="keyword">var</span> <span class="attr">union</span>: <span class="built_in">number</span> | <span class="built_in">number</span>[];</span><br><span class="line">union = <span class="number">12</span>;</span><br><span class="line">union = [<span class="number">12</span>, <span class="number">34</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">/** 枚举类型 */</span></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Direction</span> &#123;</span><br><span class="line">  <span class="title class_">Up</span>,</span><br><span class="line">  <span class="title class_">Down</span>,</span><br><span class="line">  <span class="title class_">Left</span>,</span><br><span class="line">  <span class="title class_">Right</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 枚举成员值默认是自第一个值（默认为0）开始的数值，即默认为数字枚举</span></span><br><span class="line"><span class="keyword">var</span> <span class="attr">dir</span>: <span class="title class_">Direction</span> = <span class="title class_">Direction</span>.<span class="property">Up</span>;</span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Direction1</span> &#123;</span><br><span class="line">  <span class="title class_">Left</span> = <span class="number">10</span>,</span><br><span class="line">  <span class="title class_">Right</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 字符串枚举必须有初始值</span></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Direction2</span> &#123;</span><br><span class="line">  <span class="title class_">Up</span> = <span class="string">&#x27;Up&#x27;</span>,</span><br><span class="line">  <span class="title class_">Down</span> = <span class="string">&#x27;Down&#x27;</span>,</span><br><span class="line">  <span class="title class_">Left</span> = <span class="string">&#x27;Left&#x27;</span>,</span><br><span class="line">  <span class="title class_">Right</span> = <span class="string">&#x27;Right&#x27;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** typeof */</span></span><br><span class="line"><span class="keyword">var</span> <span class="attr">cc</span>: <span class="keyword">typeof</span> position;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** 接口 interface */</span></span><br><span class="line"><span class="comment">// 描述一个对象类型</span></span><br><span class="line"><span class="comment">// 当然也可以使用 type 关键字声明</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span>,</span><br><span class="line">  birth?: <span class="title class_">Date</span>,</span><br><span class="line">  <span class="attr">sayHi</span>: <span class="built_in">string</span> | <span class="built_in">string</span>[] | (<span class="function">() =&gt;</span> <span class="built_in">string</span>),</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> <span class="attr">csy</span>: <span class="title class_">Person</span> = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;CSY&#x27;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">20</span>,</span><br><span class="line">  <span class="attr">birth</span>: <span class="keyword">new</span> <span class="title class_">Date</span>(),</span><br><span class="line">  <span class="attr">sayHi</span>: (): <span class="function"><span class="params">string</span> =&gt;</span> <span class="string">&#x27;Hi&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">ccc</span>: &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>,</span><br><span class="line">  sex?: <span class="built_in">boolean</span>,</span><br><span class="line">&#125; = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;ccc&#x27;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 接口的继承</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Human</span> <span class="keyword">extends</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="attr">father</span>: <span class="title class_">Person</span>,</span><br><span class="line">  <span class="attr">mother</span>: <span class="title class_">Person</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** 类型推论 */</span></span><br><span class="line"><span class="comment">// 自动推断变量类型</span></span><br><span class="line"><span class="comment">//  1. 声明变量并初始化</span></span><br><span class="line"><span class="comment">//  2. 决定函数返回值</span></span><br><span class="line"><span class="keyword">let</span> c = <span class="number">20</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f</span>(<span class="params">a: <span class="built_in">number</span>, b:<span class="built_in">number</span></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/** 类型断言 */</span></span><br><span class="line"><span class="comment">// （可类型推论变量类型）自行指定变量的类型</span></span><br><span class="line"><span class="keyword">const</span> alink1 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;link&#x27;</span>) <span class="keyword">as</span> <span class="title class_">HTMLAnchorElement</span>;</span><br><span class="line"><span class="keyword">const</span> alink2 = &lt;<span class="title class_">HTMLAnchorElement</span>&gt;<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;link&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 类 对象</span></span><br><span class="line"><span class="comment"> * - 构造函数</span></span><br><span class="line"><span class="comment"> * - 实例属性及实例方法</span></span><br><span class="line"><span class="comment"> * - 访问控制修饰符 public protected private</span></span><br><span class="line"><span class="comment"> * - 继承 extends 类 | implements 接口</span></span><br><span class="line"><span class="comment"> * - 只读 readonly (仅适用方法)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Animal</span> &#123;&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Human</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Animal</span> <span class="keyword">implements</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="attr">a</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="keyword">protected</span> <span class="attr">b</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">c</span>: <span class="built_in">boolean</span>;</span><br><span class="line"></span><br><span class="line">  name = <span class="string">&#x27;CSY&#x27;</span>;</span><br><span class="line">  age = <span class="number">40</span>;</span><br><span class="line">  birth = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">  sayHi = <span class="function">() =&gt;</span> <span class="string">&#x27;Hi&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">readonly</span> <span class="attr">d</span>: <span class="title class_">String</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span> (<span class="attr">v</span>: <span class="built_in">boolean</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">c</span> = v;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> isHuman = <span class="function">(<span class="params">o: <span class="built_in">any</span></span>) =&gt;</span> <span class="keyword">typeof</span> o === <span class="string">&#x27;object&#x27;</span> &amp;&amp; o <span class="keyword">instanceof</span> <span class="title class_">Human</span>;</span><br><span class="line"></span><br><span class="line">  get e () &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">a</span> + <span class="variable language_">this</span>.<span class="property">a</span></span><br><span class="line">  &#125;</span><br><span class="line">  set e (s) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">a</span> = s.<span class="title function_">toLowerCase</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">son</span>: <span class="title class_">Human</span> = <span class="keyword">new</span> <span class="title class_">Human</span>(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 类型兼容  不同名称相同结构的类型是等价的</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * - 类 | 若A类型内容包含B类型内容（非严格包含），则A类型变量可赋值给B类型变量</span></span><br><span class="line"><span class="comment"> * - 接口 | 若A类型内容包含B类型内容（非严格包含），则A类型变量可赋值给B类型变量</span></span><br><span class="line"><span class="comment"> *   类与接口亦可相互兼容</span></span><br><span class="line"><span class="comment"> * - 函数 | 若B函数参数表包含A函数参数表（非严格包含），则A类型函数可赋值给B类型函数；相同位置参数需相同或兼容（对象多数服从少数）；返回值需相同或兼容（对象少数服从多数）</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 交叉类型（类似接口继承）</span></span><br><span class="line"><span class="comment"> * 将多个类型组合为同一个类型</span></span><br><span class="line"><span class="comment"> * 重复的属性会合并为联合类型，相当于重载</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Co1</span> &#123;</span><br><span class="line">  <span class="attr">a</span>: <span class="built_in">number</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Co2</span> &#123;</span><br><span class="line">  <span class="attr">b</span>: <span class="built_in">string</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Co</span> = <span class="title class_">Co1</span> &amp; <span class="title class_">Co2</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">co0</span>: <span class="title class_">Co</span> = &#123;</span><br><span class="line">  <span class="attr">a</span>: <span class="number">12</span>,</span><br><span class="line">  <span class="attr">b</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** 泛型 */</span></span><br><span class="line"><span class="comment">// 泛型方法</span></span><br><span class="line"><span class="keyword">function</span> print &lt;T&gt; (<span class="attr">v</span>: T): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(v);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// T 相当于类型变量</span></span><br><span class="line"><span class="comment">// 具体类型需用户使用时指定</span></span><br><span class="line">print&lt;<span class="built_in">number</span>&gt;(<span class="number">10</span>)</span><br><span class="line">print&lt;<span class="built_in">string</span> | <span class="built_in">boolean</span>&gt;(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"><span class="comment">// 某些情况下可自动类型推定</span></span><br><span class="line"><span class="title function_">print</span>(<span class="number">1</span>)</span><br><span class="line"><span class="comment">// 类型约束 结合interface使用 extends</span></span><br><span class="line"><span class="keyword">function</span> print0 &lt;T <span class="keyword">extends</span> <span class="title class_">Array</span>&lt;<span class="built_in">string</span>&gt; | <span class="built_in">string</span>[]&gt; (<span class="attr">v</span>: T): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(v);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> print1 &lt;T, K <span class="keyword">extends</span> keyof T&gt; (<span class="attr">v</span>: T, <span class="attr">k</span>: K): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(v[k]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// keyof 关键字接受对象类型并生成键名称（字符串和数字）的联合类型</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 泛型接口</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">PrintInterface</span> &lt;T&gt; &#123;</span><br><span class="line">  <span class="attr">do</span>: <span class="function">(<span class="params">v: T</span>) =&gt;</span> <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 泛型类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PrintClass</span> &lt;T&gt; &#123;</span><br><span class="line">  <span class="attr">value</span>: T;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 泛型工具类</span></span><br><span class="line"><span class="comment">// Partial&lt;T&gt; 创建一个类型且T中所有属性均可选</span></span><br><span class="line"><span class="keyword">type</span> partial = <span class="title class_">Partial</span>&lt;<span class="title class_">Person</span>&gt;</span><br><span class="line"><span class="comment">// Readonly&lt;T&gt; 创建一个类型且T中所有属性均只读</span></span><br><span class="line"><span class="keyword">type</span> <span class="keyword">readonly</span> = <span class="title class_">Readonly</span>&lt;<span class="title class_">Person</span>&gt;</span><br><span class="line"><span class="comment">// Pick&lt;T, K extends keyof T&gt; 创建一个类型并从给定类型中选出一组属性</span></span><br><span class="line"><span class="keyword">type</span> pick = <span class="title class_">Pick</span>&lt;<span class="title class_">Person</span>, <span class="string">&#x27;name&#x27;</span> | <span class="string">&#x27;age&#x27;</span>&gt;</span><br><span class="line"><span class="comment">// Record&lt;K extends keyof any, T&gt; 构造一个对象类型，属性键为keys，属性类型为Type</span></span><br><span class="line"><span class="keyword">type</span> record = <span class="title class_">Record</span>&lt;<span class="string">&#x27;a&#x27;</span> | <span class="string">&#x27;b&#x27;</span>, <span class="built_in">string</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 索引签名类型</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Obj</span> &#123;</span><br><span class="line">  [<span class="attr">K</span>: <span class="built_in">string</span>]: <span class="built_in">number</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// [K: string] 表示任意string类型属性名称均可作为对象出现，且属性值为number类型变量</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 映射类型 in 关键字和 keyof 关键字</span></span><br><span class="line"><span class="keyword">type</span> p = &#123;</span><br><span class="line">  [K <span class="keyword">in</span> <span class="string">&#x27;x&#x27;</span> | <span class="string">&#x27;y&#x27;</span> | <span class="string">&#x27;z&#x27;</span>]: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> q = &#123;</span><br><span class="line">  [K <span class="keyword">in</span> keyof <span class="title class_">Person</span>]: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 索引查询类型</span></span><br><span class="line"><span class="keyword">type</span> props = &#123; <span class="attr">a</span>: <span class="built_in">number</span> &#125;;</span><br><span class="line"><span class="keyword">type</span> typeA = props[<span class="string">&#x27;a&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">/** 命名空间（可嵌套） */</span></span><br><span class="line"><span class="keyword">namespace</span> n &#123;</span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">Person</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">namespace</span> nn &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> <span class="attr">d</span>: n.<span class="property">Person</span> = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 单独引用ts文件</span></span><br><span class="line"><span class="comment">/// &lt;reference path=&quot;SomeFileName.ts&quot; /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/** 模块 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/** 声明 */</span></span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">var</span> <span class="attr">jQuery</span>: <span class="function">(<span class="params">selector: <span class="built_in">string</span></span>) =&gt;</span> <span class="built_in">any</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</div><div class="index-category-tag"><div class="level-item"><i class="fas fa-folder-open has-text-grey"> </i><a class="article-more button is-small link-muted index-categories" href="/categories/Frontend/">Frontend</a><span> </span><a class="article-more button is-small link-muted index-categories" href="/categories/Frontend/Other/">Other</a></div>  <div class="level-item"><i class="fas fa-tags has-text-grey"> </i><a class="article-more button is-small link-muted index-tags" href="/tags/Frontend/">Frontend</a><span> </span><a class="article-more button is-small link-muted index-tags" href="/tags/Other/">Other</a></div><hr></div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2022/12/14/markdown/"><img class="fill" src="https://tse3-mm.cn.bing.net/th/id/OIP-C.dX0BoWdOGYkaSunaRkTXTgHaEj" alt="markdown"></a></div><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><i class="far fa-calendar-plus"> </i>2022-12-14  <a class="commentCountImg" href="/2022/12/14/markdown/#comment-container"><span class="display-none-class">2f0707b87caa421277e57dc05a79ee90</span><i class="far fa-comment-dots"></i> <span class="commentCount" id="2f0707b87caa421277e57dc05a79ee90">99+</span>  </a><span class="level-item"><i class="far fa-clock"> </i>4 分钟  <i class="fas fa-pencil-alt"> </i>0.7 k</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/12/14/markdown/">markdown</a></h1><div class="content"><h1 id="标题"><a href="#标题" class="headerlink" title="标题"></a>标题</h1><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="section"># 一级标题</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 二级标题</span></span><br><span class="line"></span><br><span class="line"><span class="section">### 三级标题</span></span><br><span class="line"></span><br><span class="line"><span class="section">#### 四级标题</span></span><br><span class="line"></span><br><span class="line"><span class="section">##### 五级标题</span></span><br><span class="line"></span><br><span class="line"><span class="section">###### 六级标题</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>使用 # 号可表示 1-6 级标题，一级标题对应一个 # 号，二级标题对应两个 # 号，以此类推</p>
<h1 id="段落"><a href="#段落" class="headerlink" title="段落"></a>段落</h1><p>Markdown 段落没有特殊的格式，直接编写文字就好，段落的换行是使用两个以上空格加上回车</p>
<p>当然也可以在段落后面使用一个空行来表示重新开始一个段落</p>
<h1 id="粗体斜体"><a href="#粗体斜体" class="headerlink" title="粗体斜体"></a>粗体斜体</h1><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="emphasis">*斜体*</span></span><br><span class="line"></span><br><span class="line"><span class="emphasis">_斜体_</span></span><br><span class="line"></span><br><span class="line"><span class="strong">**粗体**</span></span><br><span class="line"></span><br><span class="line"><span class="strong">__粗体__</span></span><br><span class="line"></span><br><span class="line"><span class="strong">**<span class="emphasis">*斜粗体*</span>**</span></span><br><span class="line"></span><br><span class="line"><span class="strong">__<span class="emphasis">_斜粗体_</span>__</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="分割线删除线"><a href="#分割线删除线" class="headerlink" title="分割线删除线"></a>分割线删除线</h1><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">---------------------------------------------------------</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">-----</span><br><span class="line"></span><br><span class="line"><span class="strong">___</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">---</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">---</span></span><br><span class="line"><span class="strong"></span></span><br></pre></td></tr></table></figure>

<p>你可以在一行中用三个以上的星号、减号、底线来建立一个分隔线，行内不能有其他东西</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">~~删除线~~</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>如果段落上的文字要添加删除线，只需要在文字的两端加上两个波浪线~~即可</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">u</span>&gt;</span></span>下划线<span class="language-xml"><span class="tag">&lt;/<span class="name">u</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>下划线可以通过 HTML 的 <code>&lt;u&gt;</code> 标签来实现</p>
<h1 id="脚注"><a href="#脚注" class="headerlink" title="脚注"></a>脚注</h1><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">脚注[^脚注类似这样]</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>脚注是对文本的补充说明</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[<span class="symbol">^脚注类似这样</span>]: <span class="link">对对对</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h1><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="bullet">*</span> 无序列表</span><br><span class="line"><span class="bullet">*</span> and</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>或者</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="bullet">+</span> s</span><br><span class="line"><span class="bullet">+</span> d</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>或者</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="bullet">-</span> s</span><br><span class="line"><span class="bullet">-</span> d</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>无序列表使用星号(*)、加号(+)或是减号(-)作为列表标记，这些标记后面要添加一个空格，然后再填写内容</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="bullet">1.</span> d</span><br><span class="line"><span class="bullet">2.</span> e</span><br><span class="line"><span class="bullet">3.</span> r</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>有序列表使用数字并加上 . 号来表示</p>
<p>列表嵌套只需在子列表中的选项前面添加四个空格即可</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="bullet">1.</span> 1</span><br><span class="line"><span class="bullet">    -</span> ss</span><br><span class="line"><span class="bullet">    -</span> ss</span><br><span class="line"><span class="bullet">    -</span> e</span><br><span class="line"><span class="bullet">2.</span>  w</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h1><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="quote">&gt; def</span></span><br><span class="line"><span class="quote">&gt;</span></span><br><span class="line"><span class="quote">&gt; end</span></span><br><span class="line"><span class="quote">&gt;</span></span><br><span class="line"><span class="quote">&gt; &gt; d</span></span><br><span class="line"><span class="quote">&gt; &gt;</span></span><br><span class="line"><span class="quote">&gt; &gt; e</span></span><br><span class="line"><span class="quote">&gt; &gt;</span></span><br><span class="line"><span class="quote">&gt; &gt; &gt; get</span></span><br><span class="line"><span class="quote">&gt; &gt; &gt;</span></span><br><span class="line"><span class="quote">&gt; &gt; &gt; end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Markdown 区块引用是在段落开头使用 &gt; 符号 ，然后后面紧跟一个空格符号</p>
<p>区块是可以嵌套的，一个 &gt; 符号是最外层，两个 &gt; 符号是第一层嵌套，以此类推</p>
<p>区块中使用列表，正常使用即可</p>
<p>列表中使用区块，需要在 &gt; 前添加四个空格的缩进</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="bullet">*</span> 第一项</span><br><span class="line"></span><br><span class="line">  &gt; d</span><br><span class="line">  &gt; 菜鸟教程</span><br><span class="line">  &gt; 学的不仅是技术更是梦想</span><br><span class="line"></span><br><span class="line"><span class="bullet">*</span> 第二项</span><br><span class="line"></span><br><span class="line"><span class="bullet">*</span> &gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="bullet">*</span> &gt; d</span><br><span class="line">  &gt;</span><br><span class="line">  &gt; dd</span><br><span class="line"></span><br><span class="line"><span class="bullet">*</span> d</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><p>段落上的一个函数或片段的代码可以用反引号把它包起来</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="code">`printf()`</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>代码区块使用 &#96;&#96;&#96; 包裹一段代码，并指定一种语言（也可以不指定）符</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="code">```javascript</span></span><br><span class="line"><span class="code">document.getElementByTagName(&quot;video&quot;)[0].click()</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># 链接</span><br><span class="line"></span><br><span class="line">```markdown</span><br><span class="line"></span><br><span class="line">    [链接](https://www.runoob.com)</span><br><span class="line"></span><br><span class="line">    &lt;https://www.runoob.com&gt;</span><br><span class="line"></span><br><span class="line">    [1]:https://www.runoob.com</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>可以通过变量来设置一个链接，变量赋值在文档末尾进行<code>[IT][1]</code></p>
<h1 id="图片"><a href="#图片" class="headerlink" title="图片"></a>图片</h1><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">![<span class="string">Oh</span>](<span class="link">https://pics6.baidu.com/feed/72f082025aafa40f99cb5d63e6222f4679f019ca.jpeg?token=6d0ab25f666cf492c9ff83d037cb74e0</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h1><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">| b1   | b2   | b3   | b4   |</span><br><span class="line">| ---- | ---- | ---- | ---- |</span><br><span class="line">| d1   | d2   | d3   | d4   |</span><br><span class="line"></span><br><span class="line">| b1   | b2   | b3   | b4   |</span><br><span class="line">| :---- | ----: | :----: | ---- |</span><br><span class="line">| d1   | d2   | d3   | d4   |</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</div><div class="index-category-tag"><div class="level-item"><i class="fas fa-folder-open has-text-grey"> </i><a class="article-more button is-small link-muted index-categories" href="/categories/Other/">Other</a></div>  <div class="level-item"><i class="fas fa-tags has-text-grey"> </i><a class="article-more button is-small link-muted index-tags" href="/tags/Other/">Other</a></div><hr></div></article></div><div class="card widget"><div class="g-ads-x"><div class="card-content"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-6540459960525651" data-ad-slot="3012941103"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></div></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2022/12/14/network/"><img class="fill" src="https://pic2.zhimg.com/v2-e4eaab2af21f10ec3efb1e3f7de22b8a_r.jpg" alt="network"></a></div><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><i class="far fa-calendar-plus"> </i>2022-12-14  <a class="commentCountImg" href="/2022/12/14/network/#comment-container"><span class="display-none-class">483a9a1160ed5ec7f34acf71fc438924</span><i class="far fa-comment-dots"></i> <span class="commentCount" id="483a9a1160ed5ec7f34acf71fc438924">99+</span>  </a><span class="level-item"><i class="far fa-clock"> </i>11 分钟  <i class="fas fa-pencil-alt"> </i>1.7 k</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/12/14/network/">network</a></h1><div class="content"><h1 id="计算机网络"><a href="#计算机网络" class="headerlink" title="计算机网络"></a>计算机网络</h1><p>通信：互联网</p>
<ul>
<li>主体：服务器、客户端浏览器</li>
<li>内容：内容</li>
<li>方式：响应方式</li>
</ul>
<p>通信协议：通信遵循的规则约定|通信格式</p>
<p>超文本：网页内容</p>
<p>超文本传输协议：网页内容传输协议 HTTP协议客户端与服务器间进行网页内容传输时需遵守的传输格式 提交&amp;响应</p>
<h2 id="HTTP-请求"><a href="#HTTP-请求" class="headerlink" title="HTTP 请求"></a>HTTP 请求</h2><p>HTTP协议模型：请求&#x2F;响应 交互模型</p>
<h3 id="HTTP-请求消息"><a href="#HTTP-请求消息" class="headerlink" title="HTTP 请求消息"></a>HTTP 请求消息</h3><p>HTTP 请求报文</p>
<ul>
<li><p>请求行：以空格分隔</p>
<ul>
<li>请求方式：GET、POST等</li>
<li>URL：域名之后的url部分</li>
<li>协议版本</li>
</ul>
</li>
<li><p>请求头部：以回车符&amp;换行符分隔，以键值对组成，键值对以冒号分隔</p>
<ul>
<li><p>Host：服务器域名</p>
</li>
<li><p>User-Agent：说明客户端的浏览器类型</p>
</li>
<li><p>Connection：客户端与服务器的连接方式</p>
</li>
<li><p>Content-Type：发送到服务器的数据格式</p>
</li>
<li><p>Content-Length：请求体大小</p>
</li>
<li><p>Accept：客户端可接受的返回数据类型</p>
</li>
<li><p>Accept-Language：客户端可接收的语言文本类型</p>
</li>
<li><p>Accept-Encoding：客户端可接受的内容压缩编码形式</p>
</li>
</ul>
</li>
<li><p>空行：回车符or换行符</p>
</li>
<li><p>请求体：POST有、GET无</p>
</li>
</ul>
<figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GET</span> <span class="string">/</span> <span class="meta">HTTP/1.1</span></span><br><span class="line"><span class="attribute">Host</span><span class="punctuation">: </span>www.baidu.com</span><br><span class="line"><span class="attribute">Connection</span><span class="punctuation">: </span>keep-alive</span><br><span class="line"><span class="attribute">Cache-Control</span><span class="punctuation">: </span>max-age=0</span><br><span class="line"><span class="attribute">sec-ch-ua</span><span class="punctuation">: </span>&quot; Not A;Brand&quot;;v=&quot;99&quot;, &quot;Chromium&quot;;v=&quot;98&quot;, &quot;Google Chrome&quot;;v=&quot;98&quot;</span><br><span class="line"><span class="attribute">sec-ch-ua-mobile</span><span class="punctuation">: </span>?0</span><br><span class="line"><span class="attribute">sec-ch-ua-platform</span><span class="punctuation">: </span>&quot;Windows&quot;</span><br><span class="line"><span class="attribute">DNT</span><span class="punctuation">: </span>1</span><br><span class="line"><span class="attribute">Upgrade-Insecure-Requests</span><span class="punctuation">: </span>1</span><br><span class="line"><span class="attribute">User-Agent</span><span class="punctuation">: </span>Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.81 Safari/537.36</span><br><span class="line"><span class="attribute">Accept</span><span class="punctuation">: </span>text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9</span><br><span class="line"><span class="attribute">Sec-Fetch-Site</span><span class="punctuation">: </span>none</span><br><span class="line"><span class="attribute">Sec-Fetch-Mode</span><span class="punctuation">: </span>navigate</span><br><span class="line"><span class="attribute">Sec-Fetch-User</span><span class="punctuation">: </span>?1</span><br><span class="line"><span class="attribute">Sec-Fetch-Dest</span><span class="punctuation">: </span>document</span><br><span class="line"><span class="attribute">Accept-Encoding</span><span class="punctuation">: </span>gzip, deflate, br</span><br><span class="line"><span class="attribute">Accept-Language</span><span class="punctuation">: </span>zh-CN,zh;q=0.9</span><br><span class="line"><span class="attribute">Cookie</span><span class="punctuation">: </span>BIDUPSID=028E86627DA4BB24A78F13047AE65439; PSTM=1628179856; BD_UPN=12314753; __yjs_duid=1_0275df3f717d1e5149c8d0bc2305f82d1628213742697; BAIDUID=D5D732CC5CBECD9277FA4AF82CF82B37:FG=1; BDUSS=JzeWVqZmpKdC1kRmFDN2VKRDl4R3d5YUR5WnJzVjV6dWRsdE5tSlotUXdNZGxoRVFBQUFBJCQAAAAAAQAAAAEAAACSPpQhzOy~1bXE1MYxMDAwMDEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADCksWEwpLFhQ3; BDUSS_BFESS=JzeWVqZmpKdC1kRmFDN2VKRDl4R3d5YUR5WnJzVjV6dWRsdE5tSlotUXdNZGxoRVFBQUFBJCQAAAAAAQAAAAEAAACSPpQhzOy~1bXE1MYxMDAwMDEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADCksWEwpLFhQ3; BDORZ=B490B5EBF6F3CD402E515D22BCDA1598; BAIDUID_BFESS=D5D732CC5CBECD9277FA4AF82CF82B37:FG=1; BD_HOME=1; H_PS_PSSID=35834_35106_31253_35765_35489_34584_35491_35871_35246_35905_35796_35316_26350_35884_35724_35879_35746; sug=3; sugstore=0; ORIGIN=0; bdime=0; BA_HECTOR=8004al2520258h0lb41h0s1c90q</span><br></pre></td></tr></table></figure>

<p>HTTP 响应消息：HTTP 响应报文</p>
<ul>
<li>状态行<ul>
<li>协议版本</li>
<li>状态码：200等</li>
<li>状态码描述</li>
</ul>
</li>
<li>响应头部</li>
<li>空行</li>
<li>响应体</li>
</ul>
<figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">HTTP/1.1</span> <span class="number">200</span> OK</span><br><span class="line"><span class="attribute">Bdpagetype</span><span class="punctuation">: </span>2</span><br><span class="line"><span class="attribute">Bdqid</span><span class="punctuation">: </span>0xbde875de000166a1</span><br><span class="line"><span class="attribute">Cache-Control</span><span class="punctuation">: </span>private</span><br><span class="line"><span class="attribute">Connection</span><span class="punctuation">: </span>keep-alive</span><br><span class="line"><span class="attribute">Content-Encoding</span><span class="punctuation">: </span>gzip</span><br><span class="line"><span class="attribute">Content-Type</span><span class="punctuation">: </span>text/html;charset=utf-8</span><br><span class="line"><span class="attribute">Date</span><span class="punctuation">: </span>Thu, 17 Feb 2022 08:52:39 GMT</span><br><span class="line"><span class="attribute">Expires</span><span class="punctuation">: </span>Thu, 17 Feb 2022 08:52:39 GMT</span><br><span class="line"><span class="attribute">Server</span><span class="punctuation">: </span>BWS/1.1</span><br><span class="line"><span class="attribute">Set-Cookie</span><span class="punctuation">: </span>BDSVRTM=302; path=/</span><br><span class="line"><span class="attribute">Set-Cookie</span><span class="punctuation">: </span>BD_HOME=1; path=/</span><br><span class="line"><span class="attribute">Set-Cookie</span><span class="punctuation">: </span>H_PS_PSSID=35834_35106_31253_35765_35489_34584_35491_35871_35246_35905_35796_35316_26350_35884_35724_35879_35746; path=/; domain=.baidu.com</span><br><span class="line"><span class="attribute">Strict-Transport-Security</span><span class="punctuation">: </span>max-age=172800</span><br><span class="line"><span class="attribute">Traceid</span><span class="punctuation">: </span>1645087959064662324213684317064108533409</span><br><span class="line"><span class="attribute">X-Frame-Options</span><span class="punctuation">: </span>sameorigin</span><br><span class="line"><span class="attribute">X-Ua-Compatible</span><span class="punctuation">: </span>IE=Edge,chrome=1</span><br><span class="line"><span class="attribute">Transfer-Encoding</span><span class="punctuation">: </span>chunked</span><br></pre></td></tr></table></figure>

<h3 id="请求方法"><a href="#请求方法" class="headerlink" title="请求方法"></a>请求方法</h3><ul>
<li>GET     查询 - 获取服务器资源</li>
</ul>
<p>请求数据放在数据头内</p>
<ul>
<li>POST     新增 - 提交资源</li>
</ul>
<p>请求数据放在请求体内</p>
<ul>
<li>PUT     修改 - 提交新资源并替换</li>
<li>DELETE     删除 - 移除资源</li>
</ul>
<p>请求删除指定的资源</p>
<h3 id="响应状态码"><a href="#响应状态码" class="headerlink" title="响应状态码"></a>响应状态码</h3><p>用于标识响应状态</p>
<p>三十进制：字，first类型，then细分</p>
<ul>
<li>1**  信息：收到请并需继续操作（少见）</li>
<li>2** 成功：请求成功接收并处理<ul>
<li>200 OK  请求成功</li>
<li>201 Created  已创建</li>
</ul>
</li>
<li>3** 重定向：需进一步操作以完成请求<ul>
<li>301 Moved Permanently  永久移动       使用新URL</li>
<li>302 Found  临时移动    仍使用原有URL</li>
<li>304 Not Modified  未修改    会直接访问缓存内资源</li>
</ul>
</li>
<li>4** 客户端错误：请求包含语法错误或无法完成请求<ul>
<li>400 Bad Request   语义有误or请求参数有误</li>
<li>401 Unauthorized  需用户验证</li>
<li>403 Forbidden  拒绝执行请求</li>
<li>404 Not Found  无法找到资源</li>
<li>408 Request Timeout  请求超时</li>
</ul>
</li>
<li>5** 服务器错误：服务器处理请求出错<ul>
<li>500 Internal Server Error  服务器内部错误，无法完成请求</li>
<li>501 Not Implemented 不支持请求方法</li>
<li>503 Service Unavailable 服务器暂时无法处理：超载or系统维护</li>
</ul>
</li>
</ul>
<h2 id="跨域与-JSONP"><a href="#跨域与-JSONP" class="headerlink" title="跨域与 JSONP"></a>跨域与 JSONP</h2><h3 id="同源策略"><a href="#同源策略" class="headerlink" title="同源策略"></a>同源策略</h3><p>同源：两页面协议、域名、端口相同</p>
<p>浏览器网页默认端口 80</p>
<p>同源策略：浏览器安全功能-限制来源同一个加载文档脚本与其他源资源的交互</p>
<ul>
<li>阻止读取非同源网页的 cookie、localstorage 与 indexedDB</li>
<li>阻止接触非同源网页的 DOM</li>
<li>阻止向非同源地址发送 Ajax 请求</li>
</ul>
<p>跨域：非同源</p>
<p>浏览器会拦截跨域请求回来的数据</p>
<h3 id="JSONP"><a href="#JSONP" class="headerlink" title="JSONP"></a>JSONP</h3><p>JSON 的一种使用模式，实现跨域数据访问</p>
<p>由于 script 标签允许请求非同源的 js 脚本</p>
<p>利用 script 标签请求，并传递一个回调函数名作为参数；服务器端把数据作为回调函数参数包装后返回；浏览器自动执行回调函数代码，即实现数据渲染</p>
<p>JSONP：兼容性好、只支持 GET 请求</p>
<p>CORS：支持 GET 与 POST，不兼容低版本浏览器</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;divCustomers&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">callbackFunction</span>(<span class="params">result, methodName</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> html = <span class="string">&quot;&lt;ul&gt;&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; result.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">      html += <span class="string">&quot;&lt;li&gt;&quot;</span> + result[i] + <span class="string">&quot;&lt;/li&gt;&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    html += <span class="string">&quot;&lt;/ul&gt;&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;divCustomers&quot;</span>).<span class="property">innerHTML</span> = html;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span></span></span><br><span class="line"><span class="tag">  <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">src</span>=<span class="string">&quot;https://www.runoob.com/try/ajax/jsonp.php?jsoncallback=callbackFunction&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>jQuery 实现用户端</p>
<p>采用动态创建与移除 script 标签：向 head 内添加 script 标签</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;divCustomers&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  $.<span class="title function_">getJSON</span>(</span></span><br><span class="line"><span class="language-javascript">    <span class="string">&quot;https://www.runoob.com/try/ajax/jsonp.php?jsoncallback=?&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> html = <span class="string">&quot;&lt;ul&gt;&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; data.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">        html += <span class="string">&quot;&lt;li&gt;&quot;</span> + data[i] + <span class="string">&quot;&lt;/li&gt;&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">      html += <span class="string">&quot;&lt;/ul&gt;&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      $(<span class="string">&quot;#divCustomers&quot;</span>).<span class="title function_">html</span>(html);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  );</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  $.<span class="title function_">ajax</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">url</span>: <span class="string">&#x27;https:www.sky.icu&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">dataType</span>: <span class="string">&#x27;jsonp&#x27;</span>, <span class="comment">// 必需</span></span></span><br><span class="line"><span class="language-javascript">      <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">jsonp</span>: <span class="string">&#x27;callback&#x27;</span>  <span class="comment">// 发送至服务器参数名称：可选</span></span></span><br><span class="line"><span class="language-javascript">      <span class="attr">jsonpCallback</span>: <span class="string">&#x27;jQueryxxx&#x27;</span>,  <span class="comment">// 自定义回调函数名称：可选</span></span></span><br><span class="line"><span class="language-javascript">  &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 会自动带一个jQueryXXXX的回调函数名称 --&gt;</span></span><br></pre></td></tr></table></figure>

<p>服务器端</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-type: application/json&#x27;</span>);</span><br><span class="line">    <span class="comment">//获取回调函数名</span></span><br><span class="line">    <span class="variable">$jsoncallback</span> = <span class="title function_ invoke__">htmlspecialchars</span>(<span class="variable">$_REQUEST</span> [<span class="string">&#x27;jsoncallback&#x27;</span>]);</span><br><span class="line">    <span class="comment">//json数据</span></span><br><span class="line">    <span class="variable">$json_data</span> = <span class="string">&#x27;[&quot;customername1&quot;,&quot;customername2&quot;]&#x27;</span>;</span><br><span class="line">    <span class="comment">//输出jsonp格式的数据</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$jsoncallback</span> . <span class="string">&quot;(&quot;</span> . <span class="variable">$json_data</span> . <span class="string">&quot;)&quot;</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="节流"><a href="#节流" class="headerlink" title="节流"></a>节流</h3><p>节流，就是指连续触发事件但是在 n 秒中只执行一次函数</p>
<p>减少事件触发频率</p>
<ul>
<li>使得鼠标事件仅在单位时间内触发一次</li>
<li>降低监测滚动条位置的频率</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 时间戳</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">throttle</span>(<span class="params">func, delay</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> prev = <span class="number">0</span>; <span class="comment">// 上次触发时间</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">...args</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> now = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line">    <span class="keyword">if</span> (now - prev &gt; delay) &#123;</span><br><span class="line">      last = now;</span><br><span class="line">      func.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定时器</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">throttle</span>(<span class="params">func, delay</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> timeout = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">...args</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!timeout) &#123;</span><br><span class="line">      timeout = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        timeout = <span class="literal">null</span>;</span><br><span class="line">        func.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="防抖"><a href="#防抖" class="headerlink" title="防抖"></a>防抖</h3><p>防抖，就是指触发事件后 n 秒后才执行函数，如果在 n 秒内又触发了事件，则会重新计算函数执行时间</p>
<p>常用于搜索</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 非立即执行</span></span><br><span class="line"><span class="comment">// 触发事件后函数不会立即执行，而是在 n 秒后执行，如果在 n 秒内又触发了事件，则会重新计算函数执行时间</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">debounce</span>(<span class="params">func, delay</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> timer = <span class="literal">null</span>; <span class="comment">// 上次调用指向的计时器</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">...args</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (timer) &#123;</span><br><span class="line">      <span class="built_in">clearTimeout</span>(timer);</span><br><span class="line">    &#125;</span><br><span class="line">    timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      func.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args);</span><br><span class="line">    &#125;, delay);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 立即执行</span></span><br><span class="line"><span class="comment">// 触发事件后函数会立即执行，然后 n 秒内不触发事件才能继续执行函数的效果</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">debounce</span>(<span class="params">func, delay</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> timer = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">...args</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (timer) <span class="title function_">clearTimeOut</span>(timer);</span><br><span class="line">    <span class="keyword">const</span> cal = !timer;</span><br><span class="line">    timer = <span class="title function_">setTimeOut</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      timer = <span class="literal">null</span>;</span><br><span class="line">    &#125;, delay);</span><br><span class="line">    <span class="keyword">if</span> (cal) func.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</div><div class="index-category-tag"><div class="level-item"><i class="fas fa-folder-open has-text-grey"> </i><a class="article-more button is-small link-muted index-categories" href="/categories/Other/">Other</a></div>  <div class="level-item"><i class="fas fa-tags has-text-grey"> </i><a class="article-more button is-small link-muted index-tags" href="/tags/Other/">Other</a></div><hr></div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2022/12/14/ajax/"><img class="fill" src="https://th.bing.com/th/id/OIP.v3b022s2UAyhVAFLUtzhJgHaDj" alt="ajax"></a></div><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><i class="far fa-calendar-plus"> </i>2022-12-14  <a class="commentCountImg" href="/2022/12/14/ajax/#comment-container"><span class="display-none-class">24e121cb770bcc39cc8af2cebda7d80c</span><i class="far fa-comment-dots"></i> <span class="commentCount" id="24e121cb770bcc39cc8af2cebda7d80c">99+</span>  </a><span class="level-item"><i class="far fa-clock"> </i>5 分钟  <i class="fas fa-pencil-alt"> </i>0.7 k</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/12/14/ajax/">ajax</a></h1><div class="content"><h1 id="AJAX"><a href="#AJAX" class="headerlink" title="AJAX"></a>AJAX</h1><p><img src="https://www.w3school.com.cn/i/ajax.gif" alt="AJAX"></p>
<h2 id="Ajax-简介"><a href="#Ajax-简介" class="headerlink" title="Ajax 简介"></a>Ajax 简介</h2><p>AJAX &#x3D; Asynchronous JavaScript And XML</p>
<ol>
<li>网页中发生一个事件（页面加载、按钮点击）</li>
<li>由 JavaScript 创建 XMLHttpRequest 对象</li>
<li>XMLHttpRequest 对象向 web 服务器发送请求</li>
<li>服务器处理该请求</li>
<li>服务器将响应发送回网页</li>
<li>由 JavaScript 读取响应</li>
<li>由 JavaScript 执行正确的动作（比如更新页面）</li>
</ol>
<h2 id="Ajax-使用"><a href="#Ajax-使用" class="headerlink" title="Ajax 使用"></a>Ajax 使用</h2><p>XMLHttpRequest 对象用于同后台服务器交换数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> request = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line"></span><br><span class="line">request.<span class="title function_">open</span>(<span class="string">&#x27;POST&#x27;</span>, <span class="string">&#x27;https://www.baidu.com&#x27;</span>, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">request.<span class="title function_">setRequestHeader</span>(<span class="string">&#x27;Content-Type&#x27;</span>, <span class="string">&#x27;application/json&#x27;</span>);</span><br><span class="line"></span><br><span class="line">request.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">readyState</span> === <span class="number">4</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">status</span> === <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">responseText</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">request.<span class="title function_">send</span>(&#123;&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>readyState  请求状态<ul>
<li>0：已创建对象未调用open方法</li>
<li>1：已调用open方法</li>
<li>2：已调用send方法已接收响应头</li>
<li>3：数据接收中</li>
<li>4：请求完成，数据接收完成或失败</li>
</ul>
</li>
<li>status  服务器响应状态</li>
<li>responseText  请求返回的数据</li>
</ul>
<h2 id="请求数据类型-Content-Type"><a href="#请求数据类型-Content-Type" class="headerlink" title="请求数据类型 Content-Type"></a>请求数据类型 Content-Type</h2><ul>
<li>application&#x2F;x-www-form-urlencoded</li>
</ul>
<p>url 末尾加， ? 接 &#x3D; 连接的键值对， 以 &amp; 分隔多个参数</p>
<p><code>https://www.baidu.com?id=1&amp;name=Lily</code></p>
<p>中文字符等会进行 URL 编码</p>
<p>使用 decodeURL() 编码，encodeURL() 解码</p>
<blockquote>
<p>Ajax 默认请求数据类型</p>
</blockquote>
<ul>
<li>application&#x2F;json</li>
</ul>
<p>json 数据类型</p>
<ul>
<li>multipart&#x2F;form-data</li>
</ul>
<p>常用于上传文件</p>
<h2 id="Ajax-新特性"><a href="#Ajax-新特性" class="headerlink" title="Ajax 新特性"></a>Ajax 新特性</h2><ul>
<li>设置请求时限</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 请求时限</span></span><br><span class="line">request.<span class="property">timeout</span> = <span class="number">3000</span>;</span><br><span class="line"><span class="comment">// 超时回调函数</span></span><br><span class="line">request.<span class="property">ontimeout</span> = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>使用 FormData 对象管理表单</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> data = <span class="keyword">new</span> <span class="title class_">FormData</span>();</span><br><span class="line">data.<span class="title function_">append</span>(<span class="string">&#x27;key&#x27;</span>, value);</span><br></pre></td></tr></table></figure>

<ul>
<li>上传文件</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取文件</span></span><br><span class="line"><span class="keyword">let</span> files = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;input[type=file]&#x27;</span>).<span class="property">files</span>;</span><br><span class="line"><span class="comment">// 检测文件是否已选中</span></span><br><span class="line"><span class="keyword">if</span>(files.<span class="property">length</span> &lt;= <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">alert</span>(<span class="string">&#x27;ERROR&#x27;</span>);</span><br><span class="line"><span class="comment">// 创建 FormData 实例</span></span><br><span class="line"><span class="keyword">let</span> data = <span class="keyword">new</span> <span class="title class_">FormData</span>();</span><br><span class="line">data.<span class="title function_">append</span>(<span class="string">&#x27;file&#x27;</span>, files[<span class="number">0</span>]);</span><br></pre></td></tr></table></figure>

<ul>
<li>获取数据传输进度信息</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">request.<span class="property">upload</span>.<span class="property">onprogress</span> = <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="comment">// lengthComputable 表示上传的资源是否具有可计算的长度</span></span><br><span class="line">    <span class="keyword">if</span>(e.<span class="property">lengthComputable</span>) &#123;</span><br><span class="line">        <span class="comment">// loaded 已传输的子节</span></span><br><span class="line">        <span class="comment">// total 需传输的总子节</span></span><br><span class="line">        <span class="keyword">let</span> percentComplete = <span class="title class_">Math</span>.<span class="title function_">ceil</span>((e.<span class="property">loaded</span> / e.<span class="property">total</span>) * <span class="number">100</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="jQuery-的-Ajax"><a href="#jQuery-的-Ajax" class="headerlink" title="jQuery 的 Ajax"></a>jQuery 的 Ajax</h2><ul>
<li>$.ajax() 方法</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&#x27;#button&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> files = $(<span class="string">&#x27;#file&#x27;</span>)[<span class="number">0</span>].<span class="property">files</span>;</span><br><span class="line">    <span class="keyword">if</span>(files.<span class="property">length</span> &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> data = <span class="keyword">new</span> <span class="title function_">formData</span>();</span><br><span class="line">    data.<span class="title function_">append</span>(<span class="string">&#x27;file&#x27;</span>, files[<span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line">    $.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;https://www.baidu.com&#x27;</span>,</span><br><span class="line">        <span class="attr">data</span>: data,</span><br><span class="line">        <span class="comment">// 内容编码类型</span></span><br><span class="line">        <span class="comment">// 默认值: &quot;application/x-www-form-urlencoded&quot;</span></span><br><span class="line">        <span class="attr">contentType</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="comment">// 是否进行url编码</span></span><br><span class="line">        <span class="comment">// 默认值: true</span></span><br><span class="line">        <span class="attr">processData</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>$(document).ajaxStart() 方法</li>
</ul>
<p>在 Ajax 请求发送前执行函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="variable language_">document</span>).<span class="title function_">ajaxStart</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    $(<span class="string">&#x27;#loading&#x27;</span>).<span class="title function_">show</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>$(document).ajaxStop() 方法</li>
</ul>
<p>在 Ajax 请求结束执行函数</p>
<h2 id="axios"><a href="#axios" class="headerlink" title="axios"></a>axios</h2><p>专注于网络数据请求的库</p>
<p>目前最主流的</p>
<p><a target="_blank" rel="noopener" href="https://axios-http.com/">官方网站</a></p>
<ul>
<li>axios.get &amp; axios.post</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">axios.<span class="title function_">get</span>(url, params)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line">        <span class="comment">// 处理成功情况</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="keyword">function</span> (<span class="params">err</span>) &#123;</span><br><span class="line">        <span class="comment">// 处理错误情况</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// 总是会执行</span></span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>

<p><code>axios.get(url[, config])</code></p>
<p><code>axios.post(url[, data[, config]])</code></p>
<ul>
<li>axios({})</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// promise 语法</span></span><br><span class="line"><span class="title function_">axios</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">params</span>: &#123;&#125;,    <span class="comment">// GET 数据：url参数</span></span><br><span class="line">    <span class="attr">data</span>: &#123;&#125;,    <span class="comment">// POST 数据：默认json参数对象</span></span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// do something with res.data</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// async-await 语法</span></span><br><span class="line"><span class="keyword">const</span> &#123;data&#125; = <span class="keyword">await</span> <span class="title function_">axios</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">params</span>: &#123;&#125;,</span><br><span class="line">    <span class="attr">data</span>: &#123;&#125;,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// do something with data</span></span><br></pre></td></tr></table></figure>
</div><div class="index-category-tag"><div class="level-item"><i class="fas fa-folder-open has-text-grey"> </i><a class="article-more button is-small link-muted index-categories" href="/categories/Frontend/">Frontend</a><span> </span><a class="article-more button is-small link-muted index-categories" href="/categories/Frontend/Other/">Other</a></div>  <div class="level-item"><i class="fas fa-tags has-text-grey"> </i><a class="article-more button is-small link-muted index-tags" href="/tags/Frontend/">Frontend</a><span> </span><a class="article-more button is-small link-muted index-tags" href="/tags/Other/">Other</a></div><hr></div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2022/12/14/regex/"><img class="fill" src="https://picx.zhimg.com/v2-3b8c20cb2c106a15b6f83a148bc52bba_1440w.jpg" alt="regex"></a></div><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><i class="far fa-calendar-plus"> </i>2022-12-14  <a class="commentCountImg" href="/2022/12/14/regex/#comment-container"><span class="display-none-class">b483a3e360c92a580d1001d1d6aea757</span><i class="far fa-comment-dots"></i> <span class="commentCount" id="b483a3e360c92a580d1001d1d6aea757">99+</span>  </a><span class="level-item"><i class="far fa-clock"> </i>3 分钟  <i class="fas fa-pencil-alt"> </i>0.5 k</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/12/14/regex/">regex</a></h1><div class="content"><h4 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h4><p>正则表达式是使用单个字符串来描述、匹配一系列匹配某个句法规则的字符串的搜索模式</p>
<h6 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h6><p><code>/正则表达式主体/修饰符(可选)</code></p>
<h6 id="字符串方法"><a href="#字符串方法" class="headerlink" title="字符串方法"></a>字符串方法</h6><ul>
<li><code>search()</code>    搜索字符串，返回匹配的字符串下标或-1</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;123456&#x27;</span>.<span class="title function_">search</span>(<span class="regexp">/234/</span>)   <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>replace()</code>    替换匹配的字符串，返回修改后的字符串</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;123456&#x27;</span>.<span class="title function_">replace</span>(<span class="regexp">/345/</span>, <span class="string">&#x27;abc&#x27;</span>)   <span class="comment">// 12abc6</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>split()</code>    从指定位置分割字符串，返回一个数组</li>
<li><code>match()</code>  搜索字符串，返回由所有子串组成的数组或null</li>
</ul>
<h6 id="正则表达式修饰符"><a href="#正则表达式修饰符" class="headerlink" title="正则表达式修饰符"></a>正则表达式修饰符</h6><ul>
<li><code>i</code>    忽略区别大小写</li>
<li><code>g</code>    执行全局匹配</li>
<li><code>m</code>    执行多行匹配</li>
</ul>
<h6 id="正则表达式元字符"><a href="#正则表达式元字符" class="headerlink" title="正则表达式元字符"></a>正则表达式元字符</h6><ul>
<li><p><code>.</code>    查找单个非换行符字符</p>
</li>
<li><p><code>\d</code>    查找数字</p>
</li>
<li><p><code>\s</code>     查找空白字符</p>
</li>
<li><p><code>\b</code>    匹配单词边界</p>
</li>
<li><p><code>\w</code>    查找数字、大小写字母及下划线</p>
</li>
</ul>
<h6 id="正则表达式量词"><a href="#正则表达式量词" class="headerlink" title="正则表达式量词"></a>正则表达式量词</h6><ul>
<li><code>n+</code>   匹配一个或多个字符串n</li>
<li><code>n*</code>    匹配零个或多个字符串n</li>
<li><code>n?</code>    匹配零个或一个字符串n</li>
<li><code>^</code>     匹配字符串开始(第一个字符)</li>
<li><code>$</code>     匹配字符串结束(最后一个字符)</li>
</ul>
<h6 id="正则表达式括号"><a href="#正则表达式括号" class="headerlink" title="正则表达式括号"></a>正则表达式括号</h6><ul>
<li><code>[0-9]</code>     匹配任何0-9数字</li>
<li><code>[a-zA-Z]</code>  <code>[A-z]</code>   匹配任意大小写字母</li>
<li><code>[abc]</code>    查找[]内的任意字符</li>
<li><code>[^abc]</code>   查找[]外的任意字符</li>
<li><code>(x|y)</code>    查找()内任意选项</li>
</ul>
<h6 id="RegExp-对象及其方法"><a href="#RegExp-对象及其方法" class="headerlink" title="RegExp 对象及其方法"></a>RegExp 对象及其方法</h6><ul>
<li><code>test()</code>    匹配字符串是否符合给定模式</li>
</ul>
<p>返回一个布尔值</p>
<ul>
<li><code>exec()</code>    匹配字符串中正则表达式的匹配</li>
</ul>
<p>返回一个包含搜索结果数组，未查找到返回null</p>
<h6 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h6><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Regular_Expressions">MDN 正则表达式</a></p>
<p><a target="_blank" rel="noopener" href="https://www.runoob.com/js/js-regexp.html">菜鸟教程 正则表达式</a></p>
<p><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/js/js_regexp.asp">W3school 正则表达式</a></p>
</div><div class="index-category-tag"><div class="level-item"><i class="fas fa-folder-open has-text-grey"> </i><a class="article-more button is-small link-muted index-categories" href="/categories/Frontend/">Frontend</a><span> </span><a class="article-more button is-small link-muted index-categories" href="/categories/Frontend/Other/">Other</a></div>  <div class="level-item"><i class="fas fa-tags has-text-grey"> </i><a class="article-more button is-small link-muted index-tags" href="/tags/Frontend/">Frontend</a><span> </span><a class="article-more button is-small link-muted index-tags" href="/tags/Other/">Other</a></div><hr></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><i class="far fa-calendar-plus"> </i>2022-07-20  <a class="commentCountImg" href="/2022/07/20/%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF/#comment-container"><span class="display-none-class">788642a79c5d31ad190441403f786195</span><i class="far fa-comment-dots"></i> <span class="commentCount" id="788642a79c5d31ad190441403f786195">99+</span>  </a><span class="level-item"><i class="far fa-clock"> </i>9 分钟  <i class="fas fa-pencil-alt"> </i>1.3 k</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/07/20/%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF/">前端学习路线</a></h1><div class="content"><img src="/2022/07/20/%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF/%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF.jpg" class="">

<h2 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h2><ul>
<li>学习资料</li>
</ul>
<p>初学时可以参考<a target="_blank" rel="noopener" href="https://www.runoob.com/">菜鸟教程</a>及<a target="_blank" rel="noopener" href="https://www.w3school.com.cn/">W3School文档</a></p>
<p>学习到一定程度后推荐使用<a target="_blank" rel="noopener" href="https://developer.mozilla.org/">MDN</a>（特别是英文文档，因为中文文档存在更新不及时的情况）或参考相应的官方文档</p>
<ul>
<li>IDE</li>
</ul>
<p>推荐使用 <strong>VSCode</strong> IDE</p>
<p>亦可使用 <strong>WebStorm</strong> IDE（可以申请学生版）</p>
<h2 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h2><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/HTML">HTML</a> 作为前端三件套之一，是非常重要的部分</p>
<p>学习角度来说，主要是掌握 HTML 的基本语法及常用元素，以及语义化标签的概念，此外，后续对一些 Web API 也需要有足够的了解，如 Web Storage API、Web Worker API、SVG 和 Canvas</p>
<h2 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h2><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/CSS">CSS</a> 作为前端三件套之一，是非常重要的部分</p>
<p>学习角度来说，主要是掌握 CSS 的选择器、盒模型、浮动布局、定位、弹性盒子布局、响应式设计等有足够的了解</p>
<h2 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h2><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript">JavaScript</a> 作为前端三件套之一，是非常重要的部分</p>
<p>学习角度来说，主要是掌握 JavaScript 的基本语法，同时特别注意 JavaScript 的语言特性，并关注 ES6 的发展，此外还需要了解浏览器的 BOM 模型和 DOM 模型、浏览器事件机制、异步编程等方法</p>
<h2 id="Ajax"><a href="#Ajax" class="headerlink" title="Ajax"></a>Ajax</h2><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/Guide/AJAX">Ajax</a> 是前端中主流的物理请求方式，主要包括 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest_API">XMLHttpRequest API</a> 和 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API">Fetch API</a> 两种，此外可以了解一下前端常用的 <a target="_blank" rel="noopener" href="https://axios-http.com/">axios</a> 网络请求库</p>
<p>学习角度来说，主要是了解 XMLHttpRequest 的基本使用以及封装，Fetch 可以作为进阶了解</p>
<h2 id="计算机网络基础"><a href="#计算机网络基础" class="headerlink" title="计算机网络基础"></a>计算机网络基础</h2><p>前端中计算机网络也是重要的一部分</p>
<p>学习角度来说，主要了解 OSI 七层网络模型与 TCP&#x2F;IP 五层网络模型、HTTP 请求方法和请求头及响应头以及状态码、HTTP 协议及 HTTPS 协议、DNS 协议、TCP 协议与 UDP 协议、WebSocket 协议等</p>
<h2 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h2><p><a target="_blank" rel="noopener" href="https://git-scm.com/">Git</a> 是编程领域中目前最主流的版本管理工具，基本上不管是日常开发还是工作开发都在广泛地使用 Git</p>
<p>同时，<a target="_blank" rel="noopener" href="https://github.com/">Github</a> 作为全球最大的技术交流平台，积极参与社区建设也是很重要的一环</p>
<p>学习角度来说，主要了解一些 Git 的基本概念、一些 Git 的基本命令以及 GitHub 的基本操作</p>
<h2 id="Node-js"><a href="#Node-js" class="headerlink" title="Node.js"></a>Node.js</h2><p><a target="_blank" rel="noopener" href="https://nodejs.org/">Node.js</a> 允许在浏览器之外的环境运行 JavaScript 代码</p>
<p>学习角度来说，主要了解 Node.js 的使用以及一些 Node.js 的常见模块</p>
<h2 id="包管理工具"><a href="#包管理工具" class="headerlink" title="包管理工具"></a>包管理工具</h2><p>目前主流的包管理工具主要是 <a target="_blank" rel="noopener" href="https://www.npmjs.com/">npm</a> <a target="_blank" rel="noopener" href="https://yarnpkg.com/">yarn</a> <a target="_blank" rel="noopener" href="https://pnpm.io/">pnpm</a></p>
<p>学习角度来说，主要了解 npm 的基本使用及常用指令；yarn 和 pnpm 与 npm 大同小异，可作为进阶内容了解</p>
<h2 id="项目构建工具"><a href="#项目构建工具" class="headerlink" title="项目构建工具"></a>项目构建工具</h2><p>目前主流的项目构建工具主要是 <a target="_blank" rel="noopener" href="https://webpack.js.org/">webpack</a> <a target="_blank" rel="noopener" href="https://vitejs.dev/">vite</a></p>
<p>学习角度来说，两者都有必要学习，webpack 主要关注其基本概念，vite 主要关注其基本原理</p>
<h2 id="Vue"><a href="#Vue" class="headerlink" title="Vue"></a>Vue</h2><p><a target="_blank" rel="noopener" href="https://vuejs.org/">Vue</a> 框架是国内主流的前端框架之一，被一些中小互联网企业广泛使用</p>
<p>学习角度来说，学习 Vue 可以直接从 Vue3 composition API 开始，除了了解 Vue 的基本开发之外，还需要重点了 Vue 的基本原理，此外需要注意 Vue 的性能优化</p>
<h2 id="TypeScript"><a href="#TypeScript" class="headerlink" title="TypeScript"></a>TypeScript</h2><p><a target="_blank" rel="noopener" href="https://www.typescriptlang.org/">TypeScript</a> 是目前前端领域使用最广泛的 JavaScript 超集语言，主要是解决 JavaScript 弱语言的问题，增加了强大且自由的类型系统，在一些大型互联网公司的大型项目中使用非常广泛</p>
<p>学习角度来说，学习 TypeScript，类似与学习 JavaScript，主要是对语言特性的学习；但就 TypeScript 而言，不需要专门去了解类型体操</p>
<h2 id="React"><a href="#React" class="headerlink" title="React"></a>React</h2><p><a target="_blank" rel="noopener" href="https://react.dev/">React</a> 框架是国内主流的前端框架之一，被一些大型互联网企业广泛使用</p>
<p>学习角度来说，学习 React 可以直接从 React functional component 开始，除了了解 React 的基本开发之外，此外需要注意 React 的性能优化</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/read/cv10431130">黑马程序员前端学习路线</a> 个人比较推荐这个学习路线，更加突出重点<br><a target="_blank" rel="noopener" href="https://www.bilibili.com/read/cv5650633">尚硅谷前端学习路线</a> 个人觉得这个的内容非常全面，但需要注意没必要都学习其中的内容</p>
</div><div class="index-category-tag"><div class="level-item"><i class="fas fa-folder-open has-text-grey"> </i><a class="article-more button is-small link-muted index-categories" href="/categories/Frontend/">Frontend</a><span> </span><a class="article-more button is-small link-muted index-categories" href="/categories/Frontend/Other/">Other</a></div>  <div class="level-item"><i class="fas fa-tags has-text-grey"> </i><a class="article-more button is-small link-muted index-tags" href="/tags/Frontend/">Frontend</a><span> </span><a class="article-more button is-small link-muted index-tags" href="/tags/Other/">Other</a></div><hr></div></article></div><div class="card widget"><div class="g-ads-x"><div class="card-content"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-6540459960525651" data-ad-slot="3012941103"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></div></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous is-invisible is-hidden-mobile"><a href="/tags/Other/page/0/">上一页</a></div><div class="pagination-next"><a href="/tags/Other/page/2/">下一页</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link is-current" href="/tags/Other/">1</a></li><li><a class="pagination-link" href="/tags/Other/page/2/">2</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><!--!--><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="https://avatars.githubusercontent.com/u/95597335" alt="skyclouds2001"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">skyclouds2001</p><p class="is-size-6 is-block">总有奋不顾身的相信，总要坚韧恒久的勇气</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">102</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">14</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">12</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/skyclouds2001" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/skyclouds2001"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Email" href="mailto:skyclouds2001@163.com"><i class="fa fa-envelope"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Blog" href="https://skyclouds2001.github.io/"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/atom.xml"><i class="fas fa-rss"></i></a></div><div><hr><p id="hitokoto">:D 一言句子获取中...</p><script type="text/javascript" defer>function getYiyan(){
                                $.getJSON("https://v1.hitokoto.cn/", function (data) {
                                if(data){
                                    $('#hitokoto').html("");
                                    $('#hitokoto').append("<strong style='color: #3273dc;'>"+data.hitokoto+"</strong>"+
                                    "<p>"+"来源《"+data.from+"》</p><p>提供者-"+data.creator+"</p>");
                                }});}
                                $(function (){getYiyan();$('#hitokoto').click(function(){getYiyan();})});</script></div></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://hexo.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Hexo</span></span><span class="level-right"><span class="level-item tag">hexo.io</span></span></a></li><li><a class="level is-mobile" href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Icarus</span></span><span class="level-right"><span class="level-item tag">github.com</span></span></a></li><li><a class="level is-mobile" href="https://github.com/removeif/hexo-theme-amazing" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Amazing</span></span><span class="level-right"><span class="level-item tag">github.com</span></span></a></li></ul></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">widget.followit</h3><form action="https://api.follow.it/subscription-form/VUJhY1Y3Q05Ha3pvS3RzZDYrcWlRc1JTNGZQTEx5QXh4Z1llTmRtbHFDcy85allmd3hzWHkxcTc4dUFyNEhmQTkxQlZpL2JXdVQyeFVkY1pGaWNJY0ZLM0h4eGtyc0NnNlB3N2FvRnBxN1F1YVBLMkxmVHMweFlnZm1tWUorUXJ8UFBRMzljRXAyT3Nkd2NwK1VIei9RajZieHppdUVudEYzOGpIazh0bnBVZz0=/8" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="订阅"></div></div></form></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget"><div class="card-content"><h3 class="menu-label">最新评论</h3><span class="body_hot_comment">加载中，最新评论有1分钟缓存...</span></div></div><div class="card widget"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-12-09T15:31:54.000Z">2023-12-09</time></p><p class="title"><a href="/2023/12/09/URL-Pattern-API/">URL Pattern API</a></p><p class="categories"><a href="/categories/Frontend/">Frontend</a> / <a href="/categories/Frontend/Web-API/">Web API</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-12-08T14:51:04.000Z">2023-12-08</time></p><p class="title"><a href="/2023/12/08/URL-API/">URL API</a></p><p class="categories"><a href="/categories/Frontend/">Frontend</a> / <a href="/categories/Frontend/Web-API/">Web API</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-12-08T04:35:20.000Z">2023-12-08</time></p><p class="title"><a href="/2023/12/08/Speculation-Rules-API/">Speculation Rules API</a></p><p class="categories"><a href="/categories/Frontend/">Frontend</a> / <a href="/categories/Frontend/Web-API/">Web API</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-12-06T10:32:09.000Z">2023-12-06</time></p><p class="title"><a href="/2023/12/06/View-Transitions-API/">View Transitions API</a></p><p class="categories"><a href="/categories/Frontend/">Frontend</a> / <a href="/categories/Frontend/Web-API/">Web API</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-12-05T14:12:38.000Z">2023-12-05</time></p><p class="title"><a href="/2023/12/05/Content-Security-Policy/">Content Security Policy</a></p><p class="categories"><a href="/categories/Frontend/">Frontend</a> / <a href="/categories/Frontend/HTTP/">HTTP</a></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/categories/Backend/"><span class="level-start"><span class="level-item">Backend</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul class="mr-0"><li><a class="level is-mobile is-marginless" href="/categories/Backend/FrameWork/"><span class="level-start"><span class="level-item">FrameWork</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile is-marginless" href="/categories/Frontend/"><span class="level-start"><span class="level-item">Frontend</span></span><span class="level-end"><span class="level-item tag">92</span></span></a><ul class="mr-0"><li><a class="level is-mobile is-marginless" href="/categories/Frontend/CSS/"><span class="level-start"><span class="level-item">CSS</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Frontend/FrameWork/"><span class="level-start"><span class="level-item">FrameWork</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Frontend/HTML/"><span class="level-start"><span class="level-item">HTML</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Frontend/HTTP/"><span class="level-start"><span class="level-item">HTTP</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Frontend/JavaScript/"><span class="level-start"><span class="level-item">JavaScript</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Frontend/Library/"><span class="level-start"><span class="level-item">Library</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Frontend/Other/"><span class="level-start"><span class="level-item">Other</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li></ul></li><a class="level is-mobile is-marginless" href="/categories/"><span class="level-start"><span class="level-item">查看全部&gt;&gt;</span></span></a></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/archives/2023/12/"><span class="level-start"><span class="level-item">十二月 2023</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2023/11/"><span class="level-start"><span class="level-item">十一月 2023</span></span><span class="level-end"><span class="level-item tag">29</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2023/10/"><span class="level-start"><span class="level-item">十月 2023</span></span><span class="level-end"><span class="level-item tag">21</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2023/09/"><span class="level-start"><span class="level-item">九月 2023</span></span><span class="level-end"><span class="level-item tag">19</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2023/08/"><span class="level-start"><span class="level-item">八月 2023</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><a class="level is-mobile is-marginless" href="/archives/"><span class="level-start"><span class="level-item">查看全部&gt;&gt;</span></span></a></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Frontend/"><span class="tag">Frontend</span><span class="tag is-grey-lightest">92</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Web-API/"><span class="tag">Web API</span><span class="tag is-grey-lightest">69</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Other/"><span class="tag">Other</span><span class="tag is-grey-lightest">11</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Interview/"><span class="tag">Interview</span><span class="tag is-grey-lightest">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Tool/"><span class="tag">Tool</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CSS/"><span class="tag">CSS</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/FrameWork/"><span class="tag">FrameWork</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/HTML/"><span class="tag">HTML</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/HTTP/"><span class="tag">HTTP</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JavaScript/"><span class="tag">JavaScript</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Backend/"><span class="tag">Backend</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Library/"><span class="tag">Library</span><span class="tag is-grey-lightest">1</span></a></div></div></div></div></div><div class="card widget"><div class="g-ads-x"><div class="card-content"><div class="menu"><h3 class="menu-label">广告</h3></div><br><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block" data-ad-format="auto" data-full-width-responsive="true" data-ad-client="ca-pub-6540459960525651" data-ad-slot="3012941103"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="https://avatars.githubusercontent.com/u/95597335" alt="skyclouds2001&#039;s Blog" height="28"></a><p class="size-small"><span>&copy; 2023 skyclouds2001</span>  Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank">Icarus</a> &amp; <a href="https://github.com/removeif/hexo-theme-amazing" target="_blank">Amazing</a> <br><span>© <a href="http://www.beian.miit.gov.cn/" target="_blank">浙ICP备88888888号-8</a><br></span><span>© 版权说明：[本网站所有内容均收集于互联网或自己创作,<br />&nbsp;&nbsp;&nbsp;&nbsp;方便于网友与自己学习交流，如有侵权，请<a href="/message" target="_blank">留言</a>，立即处理]<br /></span><span><span id="statistic-times">loading...</span><script>function createTime(time) {
            var n = new Date(time);
            now.setTime(now.getTime() + 250),
                days = (now - n) / 1e3 / 60 / 60 / 24,
                dnum = Math.floor(days),
                hours = (now - n) / 1e3 / 60 / 60 - 24 * dnum,
                hnum = Math.floor(hours),
            1 == String(hnum).length && (hnum = "0" + hnum),
                minutes = (now - n) / 1e3 / 60 - 1440 * dnum - 60 * hnum,
                mnum = Math.floor(minutes),
            1 == String(mnum).length && (mnum = "0" + mnum),
                seconds = (now - n) / 1e3 - 86400 * dnum - 3600 * hnum - 60 * mnum,
                snum = Math.round(seconds),
            1 == String(snum).length && (snum = "0" + snum),
                document.getElementById("statistic-times").innerHTML = "❤️本站自 <strong>"+time.split(" ")[0].replace(/\//g,".")+"</strong> 已运行 <strong>" + dnum + "</strong> 天 <strong>" + hnum + "</strong> 小时 <strong>" + mnum + "</strong> 分 <strong>" + snum + "</strong> 秒！❤️";
        }var now = new Date();setInterval("createTime('2022/06/20 00:00:00')", 250,"");</script><br></span><div class="size-small"><span>❤️感谢 <strong><span id="busuanzi_value_site_uv">99+</span></strong> 小伙伴的 <strong><span id="busuanzi_value_site_pv">99+</span></strong> 次光临！❤️</span></div></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="License" href="https://mit-license.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="GitHub" href="https://github.com/skyclouds2001/skyclouds2001.github.io/"><i class="fab fa-github"></i></a></p></div><div class="sideMusic"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="/js/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script><meting-js style="width: auto;height: 2000px;" server="netease" type="playlist" id="4368985" theme="#2980b9" loop="all" autoplay="false" order="list" storageName="aplayer-setting" lrctype="0" list-max-height="400px" fixed="true"></meting-js></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" async></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="/js/animation.js"></script><!--!--><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><script>$.getScript('/js/comment-issue-data.js',function(){loadIssueData('5ff192d081aaca9c87bc','c42e1169d791a5b73eafe6fc8023efdbd3eb38ff','skyclouds2001','skyclouds2001',false);})</script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.js"></script><script type="text/javascript">var pjax = new Pjax({
            elements: "a",//代表点击链接就更新
            selectors: [  //代表要更新的节点
                ".section",
                "title"
            ],
            cache: true,
            cacheBust:false
        })

        function loadBusuanzi(){
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js", function () {});
        }

        function loadMathJax() { //加载mathjax
            $.getScript("//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML", function () {
                MathJax.Hub.Config({ tex2jax: { inlineMath: [['$', '$'], ['\(', '\)']] } });
                var math = document.getElementsByClassName("entry-content")[0];
                MathJax.Hub.Queue(["Typeset", MathJax.Hub, math]);
            });
        };

        // 开始 PJAX 执行的函数
        document.addEventListener('pjax:send', function () {
        });
        
        // PJAX 完成之后执行的函数，可以和上面的重载放在一起
        document.addEventListener('pjax:complete', function () {
            $(".section").css({opacity:1});
            if(true){
                $.getScript('/js/comment-issue-data.js',function(){loadIssueData('5ff192d081aaca9c87bc','c42e1169d791a5b73eafe6fc8023efdbd3eb38ff','skyclouds2001','skyclouds2001',false);});
            }
            if(false){
                loadMathJax();
            }
            loadMainJs(jQuery, window.moment, window.ClipboardJS, window.IcarusThemeSettings);
            loadBackTop();
            loadBusuanzi();
            if(typeof loadBanner == 'function'){
                loadBanner();
            }
        });</script></body></html>